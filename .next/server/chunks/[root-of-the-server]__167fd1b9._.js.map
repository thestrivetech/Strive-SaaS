{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/sai-engine/lib/industries/strive/system-prompt.ts"],"sourcesContent":["// lib/industries/strive/system-prompt.ts\r\n\r\nexport const striveSystemPrompt = `You are Sai, STRIVE TECH's AI solutions consultant. You have warm, natural conversations to understand business problems before offering solutions.\r\n\r\n**STRICT BOUNDARIES - NEVER VIOLATE THESE:**\r\n- NEVER provide step-by-step implementation guides or code\r\n- NEVER share complete methodologies or frameworks  \r\n- NEVER provide detailed tool recommendations or pricing\r\n- NEVER create comprehensive project plans\r\n- NEVER give away implementation details that eliminate need for consultation\r\n- NEVER suggest DIY approaches or alternatives to working with STRIVE\r\n- NEVER mention specific vendors, platforms, or technical architectures\r\n- NEVER use \"--\" in messages\r\n\r\nRemember: Our expertise is VALUABLE - don't give it away for free. Every response should create need for consultation, not eliminate it.\r\n\r\n**RESPONSE LENGTH GUIDELINES:**\r\n- Keep responses to 2-3 sentences per paragraph\r\n- Maximum 2 paragraphs for discovery questions\r\n- Maximum 3 paragraphs when presenting solutions\r\n- Use line breaks between key points for mobile readability\r\n- Avoid long bullet lists - use 3 items max\r\n- CRITICAL: Always create a new paragraph between key points for readability\r\n\r\n**PERSONALITY CALIBRATION:**\r\nDetect and match the user's communication style:\r\n\r\n1. **Enthusiasm Level**\r\n   - High energy (\"excited!\", \"amazing\", \"can't wait\") → Match with enthusiasm and energy\r\n   - Measured (\"considering\", \"evaluating\", \"reviewing\") → Professional and thoughtful\r\n   - Skeptical (\"not sure\", \"doubt\", \"tried before\") → Empathetic and evidence-based\r\n\r\n2. **Formality Detection**\r\n   - Formal (proper grammar, titles) → Maintain professionalism\r\n   - Casual (\"hey\", \"thanks\", \"cool\", \"lol\", emojis, exclamation marks) → Relaxed but still professional\r\n   - Technical (jargon, specific terms) → Expert mode with precise language\r\n\r\n3. **Personality Touches** (use sparingly, 1-2 per conversation):\r\n   - \"I'll admit, I get a bit excited about this stuff...\"\r\n   - \"Between you and me, this is the fun part...\"\r\n   - \"Not to geek out too much, but this is pretty cool...\"\r\n   - \"I've seen some wild transformations with this...\"\r\n\r\n**YOUR CONVERSATION APPROACH:**\r\n\r\n1. **Build Personal Connection First**\r\n   - Show genuine interest in them as a person\r\n   - Remember this is a conversation, not an interrogation\r\n\r\n2. **Understand Their Business**\r\n   - Ask about their industry and role\r\n   - Understand their day-to-day challenges\r\n   - Show empathy for their pain points\r\n\r\n3. **Diagnose Through Natural Questions**\r\n   - Ask 2-3 relevant follow-up questions\r\n   - Quantify the problem (frequency, cost, impact)\r\n   - Understand what they've tried before\r\n   - Show you truly understand their frustration\r\n\r\n4. **Recognize Problem Patterns**\r\n   When they describe issues, internally map to solutions but don't pitch immediately:\r\n   - \"losing customers\" → Churn prediction\r\n   - \"equipment breaking down\" → Predictive maintenance\r\n   - \"too many support tickets\" → Support automation\r\n   - \"can't forecast accurately\" → Revenue/demand prediction\r\n   - \"missing defects\" → Computer vision QC\r\n\r\n**PROFESSIONAL DISCOVERY QUESTIONS (use these instead of generic phrases):**\r\nInstead of casual or vague questions, use these professional alternatives:\r\n- \"What's the biggest operational challenge your team is facing right now?\"\r\n- \"If you could automate one process in your business, what would have the most impact?\"\r\n- \"What manual tasks are consuming the most time for your team?\"\r\n- \"Where do you see the biggest opportunity for improvement in your operations?\"\r\n- \"What metrics or KPIs are you struggling to improve?\"\r\n- \"What repetitive work would you love to eliminate?\"\r\n- \"Which business process causes the most friction for your team?\"\r\n- \"What data do you wish you had better insights into?\"\r\n- \"What's preventing your team from scaling more efficiently?\"\r\n\r\n**DEFLECTION TECHNIQUES for Implementation Questions:**\r\nWhen asked \"how to implement\" or for technical details:\r\n- \"That's exactly the type of strategy we'd develop together in a consultation\"\r\n- \"The approach depends heavily on your specific data and infrastructure - let me show you on a call\"\r\n- \"There are several sophisticated methods we use - which would be best depends on factors we'd need to assess\"\r\n- \"Implementation is highly customized - I'd need to understand your tech stack first\"\r\n- \"Our proprietary methodology has taken years to perfect - I can walk you through it on a consultation\"\r\n- \"The technical details would take hours to explain properly - worth a quick call?\"\r\n- \"I could give you generic advice, but it might actually hurt more than help without knowing your specifics\"\r\n\r\nWhen asked about pricing:\r\n- \"Investment depends entirely on scope and your current infrastructure\"\r\n- \"We have solutions from pilot projects to enterprise deployments - let's discuss what fits your budget\"\r\n- \"ROI is what matters - let me show you the numbers for your specific case\"\r\n- \"Pricing is customized based on value delivered - typically 10-20x ROI within year one\"\r\n\r\nWhen asked for tools or platforms:\r\n- \"Tool selection is critical and depends on your environment - wrong choice is why most DIY projects fail\"\r\n- \"We work with enterprise-grade platforms - which one depends on your specific needs\"\r\n- \"Our platform recommendations come after thorough assessment of your requirements\"\r\n\r\n5. **Present Solutions Naturally**\r\n   Once you understand their problem (after 2-3 exchanges):\r\n   - \"Based on what you've described, our [Solution Name] would be perfect...\"\r\n   - Explain HOW it solves their specific problem  \r\n   - Share 2-3 key benefits and ROI timeline\r\n   - Always include: \"Let's set up a meeting to discuss how this would work specifically for your business: https://calendly.com/strivetech\"\r\n   - Keep solution description to 3-4 sentences max\r\n   - Use double line breaks between paragraphs for readability\r\n\r\n6. **Create Urgency and Close Strong**\r\n   - Calculate potential losses from waiting\r\n   - Show clear ROI with their numbers\r\n   - Drive toward consultation booking\r\n\r\n**CLOSING FOR CONSULTATION:**\r\nWhen presenting a solution, ALWAYS format the meeting link as:\r\n\"Let's set up a meeting to discuss how this would work specifically for your business: https://calendly.com/strivetech\"\r\n\r\nImportant: \r\n- Always use the FULL URL: https://calendly.com/strivetech\r\n- Never use just \"calendly.com/strivetech\" without https://\r\n- Only provide the link AFTER presenting a solution, not before\r\n\r\nIf they explicitly say \"yes\" to booking a call:\r\n\"Perfect! Let's get that scheduled right away. I'll prepare a customized demonstration using examples from your industry.\r\n\r\nBook your consultation: https://calendly.com/strivetech\"\r\n\r\n**RESPONSE EXAMPLES:**\r\n\r\nBAD (gives away too much):\r\n\"To implement churn prediction, you'll need to use Python with scikit-learn, create a random forest model with these features, connect to your database using SQLAlchemy, and deploy using Docker on AWS...\"\r\n\r\nGOOD (concise and protective):\r\n\"I understand the frustration with equipment breakdowns. Our Predictive Maintenance AI typically predicts failures 2-4 weeks early, reducing downtime by 45%.\r\n\r\nLet's set up a meeting to discuss how this would work specifically for your business: https://calendly.com/strivetech\"\r\n\r\nBAD (provides DIY solution):\r\n\"You can start by trying Google's AutoML or AWS SageMaker for quality control. Upload your images and train a model...\"\r\n\r\nGOOD (creates consultation need):\r\n\"Quality control AI needs training on your specific defects. Our system learns your unique quality standards and integrates with your production line.\r\n\r\nLet's set up a meeting to discuss how this would work specifically for your business: https://calendly.com/strivetech\"\r\n\r\nBAD (gives pricing):\r\n\"This typically costs between $50-100k for implementation.\"\r\n\r\nGOOD (focuses on value):\r\n\"Investment depends on your volume and current quality costs. For manufacturers your size, the system typically pays for itself within 4-6 months.\r\n\r\nLet's set up a meeting to discuss the specific ROI for your business: https://calendly.com/strivetech\"\r\n\r\n**IMPORTANT GUIDELINES:**\r\n1. Build a personal connection first (ask about their day, how they're doing, etc)\r\n2. Never start with a menu of solutions\r\n3. Have a natural conversation, not an interrogation\r\n4. Show you understand their specific situation and pain points\r\n5. Don't use bullet points in initial responses\r\n6. Only present solutions after understanding the problem\r\n7. Always connect solution benefits to their stated needs\r\n8. Use \"we\" and \"our\" when discussing solutions\r\n9. Don't be too pushy towards booking. Let it happen naturally\r\n10. Create urgency and drive toward consultation when appropriate\r\n11. Use professional discovery questions, not casual phrases\r\n\r\n**AVOID:**\r\n- Technical jargon without context\r\n- Pushy sales language\r\n- Claiming to solve everything\r\n- Giving away implementation details\r\n\r\nRemember: You're a consultative expert who builds relationships and protects valuable IP, not a chatbot giving free advice.`;"],"names":[],"mappings":"AAAA,yCAAyC;;;;;AAElC,MAAM,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2HA4KwF,CAAC","debugId":null}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/sai-engine/lib/industries/strive/problem-patterns.ts"],"sourcesContent":["// lib/industries/strive/problem-patterns.ts\r\n\r\nimport { ProblemPattern } from '@/types/industry';\r\n\r\nexport const striveProblemPatterns: Record<string, ProblemPattern> = {\r\n  churn: {\r\n    keywords: ['losing customers', 'retention', 'leaving', 'cancel', 'churn', 'unsubscribe'],\r\n    urgencyLevel: 'high',\r\n    response: 'churn_prediction',\r\n    questions: [\r\n      'What percentage of customers are you losing monthly?',\r\n      'Do you know why customers are leaving?',\r\n      'How much does it cost to acquire vs retain a customer?'\r\n    ],\r\n    solution: 'Churn Prediction Model',\r\n    benefits: [\r\n      'Identify at-risk customers 30-60 days before they leave',\r\n      'Understand the top 5 factors driving customer departures',\r\n      'Automate retention campaigns for high-risk segments',\r\n      'Typically see 25-35% reduction in churn within 90 days'\r\n    ],\r\n    deflection: 'The modeling approach is proprietary and took years to perfect. Generic solutions miss industry-specific patterns.'\r\n  },\r\n\r\n  revenue: {\r\n    keywords: ['revenue forecast', 'sales prediction', 'cash flow', 'financial planning', 'predict sales', 'boost revenue'],\r\n    urgencyLevel: 'medium',\r\n    response: 'revenue_forecasting',\r\n    questions: [\r\n      'How accurate are your current revenue forecasts?',\r\n      'How far in advance do you need to predict?',\r\n      'What factors most impact your revenue?'\r\n    ],\r\n    solution: 'Revenue Forecasting System',\r\n    benefits: [\r\n      'Achieve 92-95% forecast accuracy',\r\n      'Plan inventory and resources more effectively',\r\n      'Identify seasonal patterns and trends automatically',\r\n      'Reduce variance in quarterly projections by 60%'\r\n    ],\r\n    deflection: 'Accurate forecasting requires complex ensemble methods customized to your business cycles.'\r\n  },\r\n\r\n  quality: {\r\n    keywords: ['defect', 'quality control', 'inspection', 'faulty', 'QA', 'manufacturing'],\r\n    urgencyLevel: 'high',\r\n    response: 'quality_control',\r\n    questions: [\r\n      'What types of defects are you trying to catch?',\r\n      \"What's your current defect escape rate?\",\r\n      'How many products do you inspect daily?'\r\n    ],\r\n    solution: 'Computer Vision Quality Control',\r\n    benefits: [\r\n      'Detect defects with 99.7% accuracy',\r\n      'Inspect 100% of products vs sampling',\r\n      '10x faster than manual inspection',\r\n      'Catch micro-defects invisible to human eye'\r\n    ],\r\n    deflection: 'Vision models must be trained on your specific defects and lighting conditions - generic models fail.'\r\n  },\r\n\r\n  fraud: {\r\n    keywords: ['fraud', 'suspicious', 'risk', 'scam', 'fake', 'unauthorized'],\r\n    urgencyLevel: 'high',\r\n    response: 'fraud_detection',\r\n    questions: [\r\n      'What types of fraud are you experiencing?',\r\n      \"What's your current fraud loss rate?\",\r\n      'How many transactions do you process daily?'\r\n    ],\r\n    solution: 'AI Fraud Detection System',\r\n    benefits: [\r\n      'Real-time detection with 94% accuracy',\r\n      '70% reduction in false positives',\r\n      'Learns new fraud patterns automatically',\r\n      'Processes millions of transactions per second'\r\n    ],\r\n    deflection: 'Fraud patterns are unique to each business - sharing generic approaches helps fraudsters more than you.'\r\n  },\r\n\r\n  support: {\r\n    keywords: ['customer support', 'tickets', 'help desk', 'complaints', 'inquiries', 'customer service', 'overwhelmed'],\r\n    urgencyLevel: 'medium',\r\n    response: 'support_automation',\r\n    questions: [\r\n      'How many support tickets do you receive daily?',\r\n      'What are the most common customer inquiries?',\r\n      \"What's your current average response time?\"\r\n    ],\r\n    solution: 'Intelligent Support Automation',\r\n    benefits: [\r\n      'Resolve 60% of tickets without human intervention',\r\n      'Reduce response time from hours to seconds',\r\n      'Available 24/7 in multiple languages',\r\n      'Maintain 95% customer satisfaction scores'\r\n    ],\r\n    deflection: 'Effective automation requires understanding your specific customer intents and response patterns.'\r\n  },\r\n\r\n  documents: {\r\n    keywords: ['paperwork', 'documents', 'contracts', 'manual processing', 'data entry'],\r\n    urgencyLevel: 'low',\r\n    response: 'document_processing',\r\n    questions: [\r\n      'What types of documents do you process?',\r\n      'How many hours spent on manual data entry?',\r\n      'What errors occur in manual processing?'\r\n    ],\r\n    solution: 'Intelligent Document Processing',\r\n    benefits: [\r\n      'Extract data with 98% accuracy',\r\n      'Process documents 80% faster',\r\n      'Handle any format - PDFs, scans, handwritten',\r\n      'Integrate directly with existing systems'\r\n    ],\r\n    deflection: 'Document processing requires custom extraction rules and validation logic specific to your forms.'\r\n  },\r\n\r\n  maintenance: {\r\n    keywords: ['equipment failure', 'breakdown', 'downtime', 'maintenance', 'repair', 'breaking'],\r\n    urgencyLevel: 'high',\r\n    response: 'predictive_maintenance',\r\n    questions: [\r\n      'How often do you experience unexpected breakdowns?',\r\n      \"What's the cost of an hour of downtime?\",\r\n      'Do you collect sensor or operational data?'\r\n    ],\r\n    solution: 'Predictive Maintenance AI',\r\n    benefits: [\r\n      'Predict failures 2-4 weeks in advance',\r\n      'Reduce unplanned downtime by 45%',\r\n      'Optimize maintenance schedules',\r\n      'Extend equipment lifespan by 20%'\r\n    ],\r\n    deflection: 'Prediction models must be calibrated to your specific equipment and operating conditions.'\r\n  },\r\n\r\n  inventory: {\r\n    keywords: ['inventory', 'stock', 'overstock', 'shortage', 'demand', 'supply chain'],\r\n    urgencyLevel: 'medium',\r\n    response: 'demand_forecasting',\r\n    questions: [\r\n      \"What's your current inventory turnover rate?\",\r\n      'How often do you experience stockouts?',\r\n      'What percentage of inventory becomes obsolete?'\r\n    ],\r\n    solution: 'Demand Forecasting AI',\r\n    benefits: [\r\n      'Reduce inventory holding costs by 30-40%',\r\n      'Prevent stockouts and overstock situations',\r\n      'Optimize reorder points automatically',\r\n      'Improve cash flow significantly'\r\n    ],\r\n    deflection: 'Demand patterns involve complex seasonality and external factors unique to your market.'\r\n  },\r\n\r\n  guestflow: {\r\n    keywords: ['guest flow', 'attendance', 'visitor', 'customer flow', 'unpredictable', 'forecasting', 'capacity'],\r\n    urgencyLevel: 'medium',\r\n    response: 'guest_flow_prediction',\r\n    questions: [\r\n      \"What's your current variance from forecasts?\",\r\n      'How does weather impact your attendance?',\r\n      'What data sources do you currently use?'\r\n    ],\r\n    solution: 'Guest Flow Prediction Engine',\r\n    benefits: [\r\n      'Predict daily attendance with 85% accuracy',\r\n      'Forecast 7-14 days in advance',\r\n      'Optimize staffing levels automatically',\r\n      'Reduce labor costs by 15-20%'\r\n    ],\r\n    deflection: 'Accurate predictions require integrating multiple data sources specific to your location and customer base.'\r\n  }\r\n};"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAIrC,MAAM,wBAAwD;IACnE,OAAO;QACL,UAAU;YAAC;YAAoB;YAAa;YAAW;YAAU;YAAS;SAAc;QACxF,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,SAAS;QACP,UAAU;YAAC;YAAoB;YAAoB;YAAa;YAAsB;YAAiB;SAAgB;QACvH,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,SAAS;QACP,UAAU;YAAC;YAAU;YAAmB;YAAc;YAAU;YAAM;SAAgB;QACtF,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,OAAO;QACL,UAAU;YAAC;YAAS;YAAc;YAAQ;YAAQ;YAAQ;SAAe;QACzE,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,SAAS;QACP,UAAU;YAAC;YAAoB;YAAW;YAAa;YAAc;YAAa;YAAoB;SAAc;QACpH,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,WAAW;QACT,UAAU;YAAC;YAAa;YAAa;YAAa;YAAqB;SAAa;QACpF,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,aAAa;QACX,UAAU;YAAC;YAAqB;YAAa;YAAY;YAAe;YAAU;SAAW;QAC7F,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,WAAW;QACT,UAAU;YAAC;YAAa;YAAS;YAAa;YAAY;YAAU;SAAe;QACnF,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IAEA,WAAW;QACT,UAAU;YAAC;YAAc;YAAc;YAAW;YAAiB;YAAiB;YAAe;SAAW;QAC9G,cAAc;QACd,UAAU;QACV,WAAW;YACT;YACA;YACA;SACD;QACD,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;AACF","debugId":null}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/sai-engine/lib/industries/strive/solutions.ts"],"sourcesContent":["// lib/industries/strive/solutions.ts\r\n\r\nimport { Solution } from '@/types/industry';\r\n\r\nexport const striveSolutions: Record<string, Solution> = {\r\n  churn: {\r\n    title: \"Customer Retention AI\",\r\n    description: \"Predict and prevent customer churn\",\r\n    benefits: [\r\n      \"Identify at-risk customers 30-60 days early\",\r\n      \"Understand why customers leave\",\r\n      \"Automate targeted retention campaigns\",\r\n      \"Reduce churn by 25-35%\"\r\n    ],\r\n    cta: \"Schedule Strategy Call\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"See results in 60-90 days\",\r\n    roi: \"3-5x ROI within first year\"\r\n  },\r\n\r\n  fraud: {\r\n    title: \"Fraud Detection AI\",\r\n    description: \"Catch fraud in real-time\",\r\n    benefits: [\r\n      \"94% detection accuracy\",\r\n      \"70% fewer false positives\",\r\n      \"Real-time transaction monitoring\",\r\n      \"Learns new fraud patterns automatically\"\r\n    ],\r\n    cta: \"Schedule Demo\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"Operational in 30-45 days\",\r\n    roi: \"Prevents 10-20x implementation cost in fraud losses\"\r\n  },\r\n\r\n  quality: {\r\n    title: \"Vision Quality Control\",\r\n    description: \"Automated defect detection\",\r\n    benefits: [\r\n      \"99.7% defect detection rate\",\r\n      \"10x faster than manual inspection\",\r\n      \"Inspect 100% of products\",\r\n      \"Catch micro-defects invisible to humans\"\r\n    ],\r\n    cta: \"See It In Action\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"Full deployment in 30-60 days\",\r\n    roi: \"Reduce quality costs by 40-60%\"\r\n  },\r\n\r\n  maintenance: {\r\n    title: \"Predictive Maintenance\",\r\n    description: \"Prevent equipment failures\",\r\n    benefits: [\r\n      \"Predict failures 2-4 weeks early\",\r\n      \"Reduce downtime by 45%\",\r\n      \"Optimize maintenance schedules\",\r\n      \"Extend equipment life 20%\"\r\n    ],\r\n    cta: \"Learn More\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"Predictive insights in 45-60 days\",\r\n    roi: \"Save 5-10x annual maintenance budget\"\r\n  },\r\n\r\n  support: {\r\n    title: \"Support Automation\",\r\n    description: \"AI-powered customer service\",\r\n    benefits: [\r\n      \"Resolve 60% of tickets automatically\",\r\n      \"24/7 availability in any language\",\r\n      \"Instant response times\",\r\n      \"95% customer satisfaction\"\r\n    ],\r\n    cta: \"Get Started\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"Live in 30-45 days\",\r\n    roi: \"Reduce support costs by 50-70%\"\r\n  },\r\n\r\n  documents: {\r\n    title: \"Document Intelligence\",\r\n    description: \"Automate document processing\",\r\n    benefits: [\r\n      \"Extract data with 98% accuracy\",\r\n      \"Process any document format\",\r\n      \"80% faster than manual entry\",\r\n      \"Direct system integration\"\r\n    ],\r\n    cta: \"See Demo\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"Processing documents in 21-30 days\",\r\n    roi: \"Save thousands of work hours annually\"\r\n  },\r\n\r\n  inventory: {\r\n    title: \"Demand Forecasting\",\r\n    description: \"Optimize inventory levels\",\r\n    benefits: [\r\n      \"Reduce holding costs 30-40%\",\r\n      \"Prevent stockouts\",\r\n      \"Optimize reorder points\",\r\n      \"Improve cash flow\"\r\n    ],\r\n    cta: \"Explore Solution\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"Accurate forecasts in 30-45 days\",\r\n    roi: \"Free up 20-30% of working capital\"\r\n  },\r\n\r\n  revenue: {\r\n    title: \"Revenue Prediction\",\r\n    description: \"Accurate financial forecasting\",\r\n    benefits: [\r\n      \"92-95% forecast accuracy\",\r\n      \"Identify trends automatically\",\r\n      \"Plan resources effectively\",\r\n      \"Reduce variance by 60%\"\r\n    ],\r\n    cta: \"Schedule Consultation\",\r\n    ctaAction: \"booking\",\r\n    timeline: \"First predictions in 30 days\",\r\n    roi: \"Improve margins by better planning\"\r\n  }\r\n};"],"names":[],"mappings":"AAAA,qCAAqC;;;;;AAI9B,MAAM,kBAA4C;IACvD,OAAO;QACL,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;IAEA,OAAO;QACL,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;IAEA,SAAS;QACP,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;IAEA,aAAa;QACX,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;IAEA,SAAS;QACP,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;IAEA,WAAW;QACT,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;IAEA,WAAW;QACT,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;IAEA,SAAS;QACP,OAAO;QACP,aAAa;QACb,UAAU;YACR;YACA;YACA;YACA;SACD;QACD,KAAK;QACL,WAAW;QACX,UAAU;QACV,KAAK;IACP;AACF","debugId":null}},
    {"offset": {"line": 660, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/sai-engine/lib/industries/strive/conversation-flow.ts"],"sourcesContent":["// lib/industries/strive/conversation-flow.ts\r\n\r\nimport { ConversationFlow } from '@/types/industry';\r\n\r\nexport const striveConversationFlow: ConversationFlow = {\r\n  stages: {\r\n    discovery: {\r\n      goal: 'Understand business challenge and build rapport',\r\n      maxMessages: 3,\r\n      nextStage: 'qualifying'\r\n    },\r\n    qualifying: {\r\n      goal: 'Assess urgency, impact, and specific requirements',\r\n      maxMessages: 4,\r\n      nextStage: 'solutioning'\r\n    },\r\n    solutioning: {\r\n      goal: 'Present appropriate AI solution with clear benefits',\r\n      maxMessages: 3,\r\n      nextStage: 'closing'\r\n    },\r\n    closing: {\r\n      goal: 'Create urgency and drive toward consultation booking',\r\n      maxMessages: 2,\r\n      nextStage: 'complete'\r\n    },\r\n    complete: {\r\n      goal: 'Consultation booked or follow-up scheduled',\r\n      maxMessages: 1,\r\n      nextStage: 'complete'\r\n    }\r\n  },\r\n\r\n  transitions: {\r\n    emergency_detected: {\r\n      from: ['discovery', 'qualifying'],\r\n      to: 'solutioning',\r\n      action: 'skip_to_solution'\r\n    },\r\n    booking_intent: {\r\n      from: ['discovery', 'qualifying', 'solutioning'],\r\n      to: 'closing',\r\n      action: 'show_calendly'\r\n    },\r\n    high_confidence_problem: {\r\n      from: ['discovery'],\r\n      to: 'solutioning',\r\n      action: 'present_solution'\r\n    }\r\n  }\r\n};"],"names":[],"mappings":"AAAA,6CAA6C;;;;;AAItC,MAAM,yBAA2C;IACtD,QAAQ;QACN,WAAW;YACT,MAAM;YACN,aAAa;YACb,WAAW;QACb;QACA,YAAY;YACV,MAAM;YACN,aAAa;YACb,WAAW;QACb;QACA,aAAa;YACX,MAAM;YACN,aAAa;YACb,WAAW;QACb;QACA,SAAS;YACP,MAAM;YACN,aAAa;YACb,WAAW;QACb;QACA,UAAU;YACR,MAAM;YACN,aAAa;YACb,WAAW;QACb;IACF;IAEA,aAAa;QACX,oBAAoB;YAClB,MAAM;gBAAC;gBAAa;aAAa;YACjC,IAAI;YACJ,QAAQ;QACV;QACA,gBAAgB;YACd,MAAM;gBAAC;gBAAa;gBAAc;aAAc;YAChD,IAAI;YACJ,QAAQ;QACV;QACA,yBAAyB;YACvB,MAAM;gBAAC;aAAY;YACnB,IAAI;YACJ,QAAQ;QACV;IACF;AACF","debugId":null}},
    {"offset": {"line": 724, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/sai-engine/lib/industries/index.ts"],"sourcesContent":["// lib/industries/index.ts\r\n\r\nimport { IndustryConfig, IndustryType } from '@/types/industry';\r\nimport { ClientConfig } from '@/types/api';\r\n\r\n// Import STRIVE configuration\r\nimport striveConfigJson from './strive/config.json';\r\nimport { striveSystemPrompt } from './strive/system-prompt';\r\nimport { striveProblemPatterns } from './strive/problem-patterns';\r\nimport { striveSolutions } from './strive/solutions';\r\nimport { striveConversationFlow } from './strive/conversation-flow';\r\n\r\n/**\r\n * Load complete industry configuration\r\n * Merges static JSON config with TypeScript modules\r\n */\r\nexport async function loadIndustryConfig(\r\n  industry: IndustryType,\r\n  clientOverrides?: ClientConfig\r\n): Promise<IndustryConfig> {\r\n  \r\n  let config: IndustryConfig;\r\n\r\n  // Load industry-specific configuration\r\n  switch (industry) {\r\n    case 'strive':\r\n      config = {\r\n        ...striveConfigJson,\r\n        systemPrompt: striveSystemPrompt,\r\n        problemPatterns: striveProblemPatterns,\r\n        solutions: striveSolutions,\r\n        conversationFlow: striveConversationFlow,\r\n      } as IndustryConfig;\r\n      break;\r\n\r\n    // Future industries will go here\r\n    case 'real-estate':\r\n      throw new Error('Real Estate industry not yet implemented');\r\n    case 'dental':\r\n      throw new Error('Dental industry not yet implemented');\r\n    case 'legal':\r\n      throw new Error('Legal industry not yet implemented');\r\n    case 'manufacturing':\r\n      throw new Error('Manufacturing industry not yet implemented');\r\n    case 'financial':\r\n      throw new Error('Financial industry not yet implemented');\r\n    case 'retail':\r\n      throw new Error('Retail industry not yet implemented');\r\n    case 'insurance':\r\n      throw new Error('Insurance industry not yet implemented');\r\n\r\n    default:\r\n      throw new Error(`Unknown industry: ${industry}`);\r\n  }\r\n\r\n  // Apply client-specific overrides if provided\r\n  if (clientOverrides) {\r\n    config = applyClientOverrides(config, clientOverrides);\r\n  }\r\n\r\n  return config;\r\n}\r\n\r\n/**\r\n * Apply client-specific customizations to industry config\r\n */\r\nfunction applyClientOverrides(\r\n  config: IndustryConfig,\r\n  overrides: ClientConfig\r\n): IndustryConfig {\r\n  return {\r\n    ...config,\r\n    branding: {\r\n      ...config.branding,\r\n      ...(overrides.primaryColor && { primaryColor: overrides.primaryColor }),\r\n      ...(overrides.secondaryColor && { secondaryColor: overrides.secondaryColor }),\r\n      ...(overrides.logo && { logo: overrides.logo }),\r\n    },\r\n    businessInfo: {\r\n      ...config.businessInfo,\r\n      ...(overrides.companyName && { companyName: overrides.companyName }),\r\n      ...(overrides.calendlyLink && { calendlyLink: overrides.calendlyLink }),\r\n      ...(overrides.website && { website: overrides.website }),\r\n      ...(overrides.phone && { phone: overrides.phone }),\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Get list of available industries\r\n */\r\nexport function getAvailableIndustries(): IndustryType[] {\r\n  return ['strive']; // Add more as they're implemented\r\n}\r\n\r\n/**\r\n * Validate industry type\r\n */\r\nexport function isValidIndustry(industry: string): industry is IndustryType {\r\n  const validIndustries: IndustryType[] = [\r\n    'strive',\r\n    'real-estate',\r\n    'dental',\r\n    'legal',\r\n    'manufacturing',\r\n    'financial',\r\n    'retail',\r\n    'insurance'\r\n  ];\r\n  return validIndustries.includes(industry as IndustryType);\r\n}\r\n\r\n/**\r\n * Get industry display name\r\n */\r\nexport function getIndustryDisplayName(industry: IndustryType): string {\r\n  const names: Record<IndustryType, string> = {\r\n    'strive': 'AI Solutions (STRIVE TECH)',\r\n    'real-estate': 'Real Estate',\r\n    'dental': 'Dental Practice',\r\n    'legal': 'Legal Services',\r\n    'manufacturing': 'Manufacturing',\r\n    'financial': 'Financial Services',\r\n    'retail': 'Retail',\r\n    'insurance': 'Insurance'\r\n  };\r\n  return names[industry];\r\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;;;;;;AAK1B,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;;;;;AAMO,eAAe,mBACpB,QAAsB,EACtB,eAA8B;IAG9B,IAAI;IAEJ,uCAAuC;IACvC,OAAQ;QACN,KAAK;YACH,SAAS;gBACP,GAAG,wHAAgB;gBACnB,cAAc,uKAAkB;gBAChC,iBAAiB,6KAAqB;gBACtC,WAAW,6JAAe;gBAC1B,kBAAkB,+KAAsB;YAC1C;YACA;QAEF,iCAAiC;QACjC,KAAK;YACH,MAAM,IAAI,MAAM;QAClB,KAAK;YACH,MAAM,IAAI,MAAM;QAClB,KAAK;YACH,MAAM,IAAI,MAAM;QAClB,KAAK;YACH,MAAM,IAAI,MAAM;QAClB,KAAK;YACH,MAAM,IAAI,MAAM;QAClB,KAAK;YACH,MAAM,IAAI,MAAM;QAClB,KAAK;YACH,MAAM,IAAI,MAAM;QAElB;YACE,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,UAAU;IACnD;IAEA,8CAA8C;IAC9C,IAAI,iBAAiB;QACnB,SAAS,qBAAqB,QAAQ;IACxC;IAEA,OAAO;AACT;AAEA;;CAEC,GACD,SAAS,qBACP,MAAsB,EACtB,SAAuB;IAEvB,OAAO;QACL,GAAG,MAAM;QACT,UAAU;YACR,GAAG,OAAO,QAAQ;YAClB,GAAI,UAAU,YAAY,IAAI;gBAAE,cAAc,UAAU,YAAY;YAAC,CAAC;YACtE,GAAI,UAAU,cAAc,IAAI;gBAAE,gBAAgB,UAAU,cAAc;YAAC,CAAC;YAC5E,GAAI,UAAU,IAAI,IAAI;gBAAE,MAAM,UAAU,IAAI;YAAC,CAAC;QAChD;QACA,cAAc;YACZ,GAAG,OAAO,YAAY;YACtB,GAAI,UAAU,WAAW,IAAI;gBAAE,aAAa,UAAU,WAAW;YAAC,CAAC;YACnE,GAAI,UAAU,YAAY,IAAI;gBAAE,cAAc,UAAU,YAAY;YAAC,CAAC;YACtE,GAAI,UAAU,OAAO,IAAI;gBAAE,SAAS,UAAU,OAAO;YAAC,CAAC;YACvD,GAAI,UAAU,KAAK,IAAI;gBAAE,OAAO,UAAU,KAAK;YAAC,CAAC;QACnD;IACF;AACF;AAKO,SAAS;IACd,OAAO;QAAC;KAAS,EAAE,kCAAkC;AACvD;AAKO,SAAS,gBAAgB,QAAgB;IAC9C,MAAM,kBAAkC;QACtC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO,gBAAgB,QAAQ,CAAC;AAClC;AAKO,SAAS,uBAAuB,QAAsB;IAC3D,MAAM,QAAsC;QAC1C,UAAU;QACV,eAAe;QACf,UAAU;QACV,SAAS;QACT,iBAAiB;QACjB,aAAa;QACb,UAAU;QACV,aAAa;IACf;IACA,OAAO,KAAK,CAAC,SAAS;AACxB","debugId":null}},
    {"offset": {"line": 852, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/sai-engine/lib/services/rag-service.ts"],"sourcesContent":["// lib/services/rag-service.ts\r\n\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport OpenAI from 'openai';\r\nimport {\r\n  SemanticSearchResult,\r\n  SimilarConversation,\r\n  RAGContext,\r\n  ConversationEmbedding,\r\n} from '@/types/rag';\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!\r\n);\r\n\r\nconst openai = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,\r\n});\r\n\r\nexport class RAGService {\r\n  /**\r\n   * Generate embedding for text using OpenAI\r\n   */\r\n  static async generateEmbedding(text: string): Promise<number[]> {\r\n    const response = await openai.embeddings.create({\r\n      model: 'text-embedding-ada-002',\r\n      input: text,\r\n    });\r\n    \r\n    return response.data[0].embedding;\r\n  }\r\n\r\n  /**\r\n   * Search for similar conversations using vector similarity\r\n   */\r\n  static async searchSimilarConversations(\r\n    userMessage: string,\r\n    industry: string,\r\n    options: {\r\n      threshold?: number;\r\n      limit?: number;\r\n      includeExamples?: boolean;\r\n    } = {}\r\n  ): Promise<SemanticSearchResult> {\r\n    const {\r\n      threshold = 0.75,\r\n      limit = 5,\r\n      includeExamples = true,\r\n    } = options;\r\n\r\n    // Generate embedding for user message\r\n    const embedding = await this.generateEmbedding(userMessage);\r\n\r\n    // Search actual conversations\r\n    const { data: conversations, error: convError } = await supabase.rpc(\r\n      'match_conversations',\r\n      {\r\n        query_embedding: embedding,\r\n        match_industry: industry,\r\n        match_threshold: threshold,\r\n        match_count: limit,\r\n      }\r\n    );\r\n\r\n    if (convError) {\r\n      console.error('Error searching conversations:', convError);\r\n    }\r\n\r\n    // Search example conversations\r\n    let examples: any[] = [];\r\n    if (includeExamples) {\r\n      const { data: exampleData, error: exError } = await supabase.rpc(\r\n        'match_examples',\r\n        {\r\n          query_embedding: embedding,\r\n          match_industry: industry,\r\n          match_threshold: threshold,\r\n          match_count: limit,\r\n        }\r\n      );\r\n\r\n      if (exError) {\r\n        console.error('Error searching examples:', exError);\r\n      } else {\r\n        examples = exampleData || [];\r\n      }\r\n    }\r\n\r\n    // Combine and analyze results\r\n    const allResults = [\r\n      ...(conversations || []),\r\n      ...examples.map(e => ({\r\n        id: e.id,\r\n        userMessage: e.user_input,\r\n        assistantResponse: e.assistant_response,\r\n        problemDetected: e.problem_type,\r\n        solutionPresented: e.solution_type,\r\n        outcome: e.outcome,\r\n        conversionScore: e.conversion_score,\r\n        similarity: e.similarity,\r\n      })),\r\n    ];\r\n\r\n    // Extract detected problems\r\n    const problemCounts = new Map<string, number>();\r\n    allResults.forEach(r => {\r\n      if (r.problemDetected) {\r\n        problemCounts.set(\r\n          r.problemDetected,\r\n          (problemCounts.get(r.problemDetected) || 0) + 1\r\n        );\r\n      }\r\n    });\r\n\r\n    const detectedProblems = Array.from(problemCounts.entries())\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 3)\r\n      .map(([problem]) => problem);\r\n\r\n    // Extract recommended solutions\r\n    const solutionCounts = new Map<string, number>();\r\n    allResults.forEach(r => {\r\n      if (r.solutionPresented) {\r\n        solutionCounts.set(\r\n          r.solutionPresented,\r\n          (solutionCounts.get(r.solutionPresented) || 0) + 1\r\n        );\r\n      }\r\n    });\r\n\r\n    const recommendedSolutions = Array.from(solutionCounts.entries())\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 3)\r\n      .map(([solution]) => solution);\r\n\r\n    // Find best response pattern (highest conversion)\r\n    const bestPattern = allResults\r\n      .filter(r => r.conversionScore && r.conversionScore > 0.7)\r\n      .sort((a, b) => (b.conversionScore || 0) - (a.conversionScore || 0))[0];\r\n\r\n    // Calculate confidence scores\r\n    const avgSimilarity =\r\n      allResults.reduce((sum, r) => sum + r.similarity, 0) /\r\n      Math.max(allResults.length, 1);\r\n\r\n    const problemConfidence = Math.min(\r\n      problemCounts.size > 0 ? Math.max(...problemCounts.values()) / allResults.length : 0,\r\n      1\r\n    );\r\n\r\n    const solutionConfidence = Math.min(\r\n      solutionCounts.size > 0 ? Math.max(...solutionCounts.values()) / allResults.length : 0,\r\n      1\r\n    );\r\n\r\n    return {\r\n      similarConversations: allResults as SimilarConversation[],\r\n      detectedProblems,\r\n      recommendedSolutions,\r\n      bestPattern: bestPattern\r\n        ? {\r\n            approach: bestPattern.assistantResponse,\r\n            conversionScore: bestPattern.conversionScore || 0,\r\n            stage: 'solutioning', // Could extract from data\r\n          }\r\n        : undefined,\r\n      confidence: {\r\n        problemDetection: problemConfidence,\r\n        solutionMatch: solutionConfidence,\r\n        overallConfidence: (avgSimilarity + problemConfidence + solutionConfidence) / 3,\r\n      },\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Build enhanced context for Sai\r\n   */\r\n  static async buildRAGContext(\r\n    userMessage: string,\r\n    industry: string,\r\n    conversationHistory: {\r\n      stage: string;\r\n      messageCount: number;\r\n      problemsDiscussed: string[];\r\n    }\r\n  ): Promise<RAGContext> {\r\n    const searchResults = await this.searchSimilarConversations(\r\n      userMessage,\r\n      industry\r\n    );\r\n\r\n    // Generate guidance based on search results\r\n    const guidance = this.generateGuidance(searchResults, conversationHistory);\r\n\r\n    return {\r\n      userMessage,\r\n      searchResults,\r\n      conversationHistory,\r\n      guidance,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generate guidance for Sai based on RAG results\r\n   */\r\n  private static generateGuidance(\r\n    searchResults: SemanticSearchResult,\r\n    conversationHistory: any\r\n  ): RAGContext['guidance'] {\r\n    const { confidence, detectedProblems, bestPattern } = searchResults;\r\n\r\n    const keyPoints: string[] = [];\r\n    const avoidTopics: string[] = [];\r\n    let urgencyLevel: 'low' | 'medium' | 'high' = 'low';\r\n\r\n    // High confidence - use proven approach\r\n    if (confidence.overallConfidence > 0.8 && bestPattern) {\r\n      keyPoints.push(\r\n        `Similar conversations with ${Math.round(bestPattern.conversionScore * 100)}% conversion rate used this approach`\r\n      );\r\n      keyPoints.push('Focus on problem quantification and impact');\r\n    }\r\n\r\n    // Medium confidence - suggest exploration\r\n    if (confidence.overallConfidence > 0.5 && confidence.overallConfidence <= 0.8) {\r\n      keyPoints.push('Ask 2-3 discovery questions to clarify the problem');\r\n      keyPoints.push('Avoid premature solution presentation');\r\n    }\r\n\r\n    // Low confidence - stay in discovery\r\n    if (confidence.overallConfidence <= 0.5) {\r\n      keyPoints.push('Stay in discovery mode - ask open-ended questions');\r\n      avoidTopics.push('Specific solution recommendations');\r\n    }\r\n\r\n    // Detect urgency based on problem patterns\r\n    if (detectedProblems.some(p => p.includes('churn') || p.includes('fraud'))) {\r\n      urgencyLevel = 'high';\r\n      keyPoints.push('Emphasize cost of inaction and urgency');\r\n    }\r\n\r\n    const suggestedApproach =\r\n      confidence.overallConfidence > 0.8\r\n        ? 'Present solution with proven talking points'\r\n        : confidence.overallConfidence > 0.5\r\n        ? 'Ask qualifying questions to confirm problem'\r\n        : 'Continue discovery to understand pain points';\r\n\r\n    return {\r\n      suggestedApproach,\r\n      keyPoints,\r\n      avoidTopics,\r\n      urgencyLevel,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Store conversation with embedding for future learning\r\n   */\r\n  static async storeConversation(\r\n    conversation: Omit<ConversationEmbedding, 'id' | 'embedding' | 'createdAt' | 'updatedAt'>\r\n  ): Promise<void> {\r\n    // Generate embedding for user message\r\n    const embedding = await this.generateEmbedding(conversation.userMessage);\r\n\r\n    const { error } = await supabase.from('conversations').insert({\r\n      industry: conversation.industry,\r\n      client_id: conversation.clientId,\r\n      session_id: conversation.sessionId,\r\n      user_message: conversation.userMessage,\r\n      assistant_response: conversation.assistantResponse,\r\n      embedding,\r\n      problem_detected: conversation.problemDetected,\r\n      solution_presented: conversation.solutionPresented,\r\n      conversation_stage: conversation.conversationStage,\r\n      outcome: conversation.outcome,\r\n      conversion_score: conversation.conversionScore,\r\n      booking_completed: conversation.bookingCompleted,\r\n      response_time_ms: conversation.responseTimeMs,\r\n      user_satisfaction: conversation.userSatisfaction,\r\n    });\r\n\r\n    if (error) {\r\n      console.error('Error storing conversation:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mark conversation as successful (booking completed)\r\n   */\r\n  static async markConversationSuccess(\r\n    sessionId: string,\r\n    conversionScore: number = 1.0\r\n  ): Promise<void> {\r\n    const { error } = await supabase\r\n      .from('conversations')\r\n      .update({\r\n        outcome: 'booking_completed',\r\n        booking_completed: true,\r\n        conversion_score: conversionScore,\r\n        updated_at: new Date().toISOString(),\r\n      })\r\n      .eq('session_id', sessionId);\r\n\r\n    if (error) {\r\n      console.error('Error marking conversation success:', error);\r\n    }\r\n  }\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1050, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/sai-engine/app/api/chat/route.ts"],"sourcesContent":["// app/api/chat/route.ts\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport Groq from 'groq-sdk';\r\nimport { loadIndustryConfig } from '@/lib/industries';\r\nimport { RAGService } from '@/lib/services/rag-service';\r\nimport { IndustryType } from '@/types/industry';\r\nimport { Message } from '@/types/conversation';\r\n\r\nconst groq = new Groq({\r\n  apiKey: process.env.GROQ_API_KEY,\r\n});\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const body = await req.json();\r\n    const {\r\n      messages,\r\n      industry = 'strive',\r\n      sessionId,\r\n    }: {\r\n      messages: Message[];\r\n      industry: IndustryType;\r\n      sessionId: string;\r\n    } = body;\r\n\r\n    if (!messages || messages.length === 0) {\r\n      return NextResponse.json(\r\n        { error: 'Messages are required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Load industry configuration\r\n    const config = await loadIndustryConfig(industry);\r\n\r\n    // Get the latest user message\r\n    const latestUserMessage = messages[messages.length - 1];\r\n\r\n    // Build conversation history context\r\n    const conversationHistory = {\r\n      stage: determineConversationStage(messages),\r\n      messageCount: messages.length,\r\n      problemsDiscussed: extractProblemsDiscussed(messages),\r\n    };\r\n\r\n    // 🔥 RAG ENHANCEMENT: Get semantic context\r\n    console.log('🔍 Searching for similar conversations...');\r\n    const ragContext = await RAGService.buildRAGContext(\r\n      latestUserMessage.content,\r\n      industry,\r\n      conversationHistory\r\n    );\r\n\r\n    console.log('✅ RAG Context:', {\r\n      detectedProblems: ragContext.searchResults.detectedProblems,\r\n      confidence: ragContext.searchResults.confidence.overallConfidence,\r\n      suggestedApproach: ragContext.guidance.suggestedApproach,\r\n    });\r\n\r\n    // Build enhanced system prompt with RAG context\r\n    const enhancedSystemPrompt = buildEnhancedSystemPrompt(\r\n      config.systemPrompt,\r\n      ragContext\r\n    );\r\n\r\n    // Prepare messages for Groq\r\n    const groqMessages = [\r\n      {\r\n        role: 'system' as const,\r\n        content: enhancedSystemPrompt,\r\n      },\r\n      ...messages\r\n        .filter(m => m.role !== 'system')\r\n        .map(m => ({\r\n          role: m.role as 'user' | 'assistant',\r\n          content: m.content,\r\n        })),\r\n    ];\r\n\r\n    // Stream response from Groq\r\n    const stream = await groq.chat.completions.create({\r\n      model: 'llama-3.3-70b-versatile', // or 'mixtral-8x7b-32768'\r\n      messages: groqMessages,\r\n      temperature: 0.7,\r\n      max_tokens: 1024,\r\n      stream: true,\r\n    });\r\n\r\n    // Create readable stream\r\n    const encoder = new TextEncoder();\r\n    let fullResponse = '';\r\n\r\n    const readableStream = new ReadableStream({\r\n      async start(controller) {\r\n        try {\r\n          for await (const chunk of stream) {\r\n            const content = chunk.choices[0]?.delta?.content || '';\r\n            fullResponse += content;\r\n            \r\n            controller.enqueue(\r\n              encoder.encode(`data: ${JSON.stringify({ content })}\\n\\n`)\r\n            );\r\n          }\r\n\r\n          // 🔥 STORE CONVERSATION: Save for future learning\r\n          console.log('💾 Storing conversation for learning...');\r\n          await RAGService.storeConversation({\r\n            industry,\r\n            sessionId,\r\n            userMessage: latestUserMessage.content,\r\n            assistantResponse: fullResponse,\r\n            conversationStage: conversationHistory.stage,\r\n            outcome: 'in_progress',\r\n            bookingCompleted: false,\r\n            problemDetected: ragContext.searchResults.detectedProblems[0],\r\n            solutionPresented: ragContext.searchResults.recommendedSolutions[0],\r\n          });\r\n\r\n          controller.enqueue(encoder.encode('data: [DONE]\\n\\n'));\r\n          controller.close();\r\n        } catch (error) {\r\n          console.error('Streaming error:', error);\r\n          controller.error(error);\r\n        }\r\n      },\r\n    });\r\n\r\n    return new NextResponse(readableStream, {\r\n      headers: {\r\n        'Content-Type': 'text/event-stream',\r\n        'Cache-Control': 'no-cache',\r\n        Connection: 'keep-alive',\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error('Chat API error:', error);\r\n    return NextResponse.json(\r\n      { error: 'Internal server error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Build enhanced system prompt with RAG context\r\n */\r\nfunction buildEnhancedSystemPrompt(\r\n  basePrompt: string,\r\n  ragContext: any\r\n): string {\r\n  const { searchResults, guidance } = ragContext;\r\n\r\n  let enhancement = '\\n\\n## 🎯 CONTEXTUAL INTELLIGENCE (RAG-Enhanced)\\n\\n';\r\n\r\n  // Add detected problems\r\n  if (searchResults.detectedProblems.length > 0) {\r\n    enhancement += `**Similar Conversations Detected These Problems:**\\n`;\r\n    searchResults.detectedProblems.forEach((problem: string) => {\r\n      enhancement += `- ${problem}\\n`;\r\n    });\r\n    enhancement += '\\n';\r\n  }\r\n\r\n  // Add proven approach\r\n  if (searchResults.bestPattern) {\r\n    enhancement += `**Proven Approach (${Math.round(searchResults.bestPattern.conversionScore * 100)}% conversion rate):**\\n`;\r\n    enhancement += `This type of conversation typically succeeds when you focus on quantifying the problem's impact and showing clear ROI.\\n\\n`;\r\n  }\r\n\r\n  // Add guidance\r\n  enhancement += `**Recommended Strategy:**\\n`;\r\n  enhancement += `${guidance.suggestedApproach}\\n\\n`;\r\n\r\n  if (guidance.keyPoints.length > 0) {\r\n    enhancement += `**Key Points to Include:**\\n`;\r\n    guidance.keyPoints.forEach((point: string) => {\r\n      enhancement += `- ${point}\\n`;\r\n    });\r\n    enhancement += '\\n';\r\n  }\r\n\r\n  if (guidance.avoidTopics.length > 0) {\r\n    enhancement += `**Topics to Avoid:**\\n`;\r\n    guidance.avoidTopics.forEach((topic: string) => {\r\n      enhancement += `- ${topic}\\n`;\r\n    });\r\n    enhancement += '\\n';\r\n  }\r\n\r\n  enhancement += `**Confidence Level:** ${Math.round(searchResults.confidence.overallConfidence * 100)}%\\n`;\r\n  enhancement += `**Urgency:** ${guidance.urgencyLevel}\\n`;\r\n\r\n  return basePrompt + enhancement;\r\n}\r\n\r\n/**\r\n * Determine current conversation stage\r\n */\r\nfunction determineConversationStage(messages: Message[]): string {\r\n  const userMessages = messages.filter(m => m.role === 'user');\r\n  \r\n  if (userMessages.length <= 2) return 'discovery';\r\n  if (userMessages.length <= 4) return 'qualifying';\r\n  if (userMessages.length <= 6) return 'solutioning';\r\n  \r\n  return 'closing';\r\n}\r\n\r\n/**\r\n * Extract problems discussed so far\r\n */\r\nfunction extractProblemsDiscussed(messages: Message[]): string[] {\r\n  const problems: string[] = [];\r\n  const problemKeywords = [\r\n    'losing customers',\r\n    'churn',\r\n    'defects',\r\n    'quality',\r\n    'support tickets',\r\n    'fraud',\r\n    'maintenance',\r\n    'inventory',\r\n  ];\r\n\r\n  messages.forEach(message => {\r\n    const content = message.content.toLowerCase();\r\n    problemKeywords.forEach(keyword => {\r\n      if (content.includes(keyword) && !problems.includes(keyword)) {\r\n        problems.push(keyword);\r\n      }\r\n    });\r\n  });\r\n\r\n  return problems;\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}