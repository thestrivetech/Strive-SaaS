{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/components/%28web%29/shared/avatars.tsx"],"sourcesContent":["// components/(web)/shared/avatars.tsx\r\n'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Bot, UserRound } from 'lucide-react';\r\n\r\nconst MOBILE_AVATAR_SIZE = 65;\r\nconst DESKTOP_AVATAR_SIZE = 80;\r\n\r\n// Bot icon component\r\nconst WhiteBotIcon: React.FC<{ size?: number; className?: string; style?: React.CSSProperties }> = ({\r\n  size = 50,\r\n  className = \"\",\r\n  style = {}\r\n}) => (\r\n  <div\r\n    className={`flex items-center justify-center ${className}`}\r\n    style={{\r\n      width: `${size}px`,\r\n      height: `${size}px`,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      ...style\r\n    }}\r\n  >\r\n    <div\r\n      className=\"rounded-full bg-gradient-to-br from-gray-700 via-gray-600 to-gray-700 flex items-center justify-center shadow-lg ring-2 ring-white\"\r\n      style={{\r\n        width: `${size * 0.8}px`,\r\n        height: `${size * 0.8}px`,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}\r\n    >\r\n      <Bot size={size * 0.45} className=\"text-white\" strokeWidth={2} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// User avatar component\r\nexport const UserAvatar: React.FC<{ size?: number; className?: string }> = ({ size = 50, className = \"\" }) => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  const avatarSize = isMobile ? MOBILE_AVATAR_SIZE : size;\r\n\r\n  return (\r\n    <motion.div\r\n      className={`flex items-center justify-center ${className}`}\r\n      style={{\r\n        width: `${avatarSize}px`,\r\n        height: `${avatarSize}px`,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        margin: '0 auto'\r\n      }}\r\n      whileHover={{ scale: 1.1 }}\r\n      transition={{ duration: 0.2 }}\r\n    >\r\n      <div\r\n        className=\"rounded-full bg-gradient-to-br from-primary-500 via-primary-600 to-primary-700 flex items-center justify-center shadow-lg ring-2 ring-white\"\r\n        style={{\r\n          width: `${avatarSize * 0.8}px`,\r\n          height: `${avatarSize * 0.8}px`,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center'\r\n        }}\r\n      >\r\n        <UserRound\r\n          size={avatarSize * 0.45}\r\n          className=\"text-white\"\r\n          strokeWidth={2}\r\n          style={{ display: 'block' }}\r\n        />\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n// Base avatar component\r\nconst BaseAvatar: React.FC<{\r\n  size?: number;\r\n  isAnimating?: boolean;\r\n  animationConfig?: any;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}> = ({ size = 50, isAnimating = false, animationConfig = {}, className = \"\", style = {} }) => {\r\n  return isAnimating ? (\r\n    <motion.div\r\n      className={className}\r\n      animate={animationConfig.animate}\r\n      transition={animationConfig.transition}\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        ...style\r\n      }}\r\n    >\r\n      <WhiteBotIcon size={size} />\r\n    </motion.div>\r\n  ) : (\r\n    <WhiteBotIcon size={size} className={className} style={style} />\r\n  );\r\n};\r\n\r\n// Main Sai avatar with glow effect\r\nexport const SaiAvatar: React.FC<{ size?: number; className?: string }> = ({ size = 60, className = \"\" }) => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  const avatarSize = isMobile ? MOBILE_AVATAR_SIZE : size;\r\n\r\n  return (\r\n    <motion.div\r\n      className={`flex items-center justify-center relative ${className}`}\r\n      whileHover={{ scale: 1.2 }}\r\n      transition={{ duration: 0.3, ease: \"easeInOut\" }}\r\n    >\r\n      <motion.div\r\n        className=\"absolute inset-0 rounded-full bg-primary-500\"\r\n        animate={{\r\n          scale: [1, 1.4, 1.2, 1.6, 1],\r\n          opacity: [0.1, 0.3, 0.15, 0.4, 0.1],\r\n          filter: [\"blur(8px) brightness(1)\", \"blur(12px) brightness(1.2)\", \"blur(10px) brightness(1.1)\", \"blur(15px) brightness(1.3)\", \"blur(8px) brightness(1)\"]\r\n        }}\r\n        transition={{ duration: 4, repeat: Infinity, ease: \"easeInOut\", repeatType: \"reverse\" }}\r\n        style={{ width: `${avatarSize + 30}px`, height: `${avatarSize + 30}px`, left: '-15px', top: '-15px' }}\r\n      />\r\n      <BaseAvatar\r\n        size={avatarSize}\r\n        className=\"relative z-10\"\r\n        isAnimating={true}\r\n        animationConfig={{\r\n          animate: { filter: ['drop-shadow(0 8px 16px rgba(255, 255, 255, 0.4)) brightness(1)', 'drop-shadow(0 12px 24px rgba(255, 255, 255, 0.6)) brightness(1.1)', 'drop-shadow(0 8px 16px rgba(255, 255, 255, 0.4)) brightness(1)'] },\r\n          transition: { duration: 3, repeat: Infinity, ease: \"easeInOut\" }\r\n        }}\r\n      />\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n// Loading avatar variant\r\nexport const LoadingSaiAvatar: React.FC<{ size?: number }> = ({ size = 50 }) => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  const avatarSize = isMobile ? MOBILE_AVATAR_SIZE : size;\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"flex items-center justify-center relative\"\r\n      animate={{ rotate: [0, 360] }}\r\n      transition={{ rotate: { duration: 2, repeat: Infinity, ease: \"linear\" } }}\r\n    >\r\n      <motion.div\r\n        className=\"absolute inset-0 rounded-full bg-primary-500\"\r\n        animate={{ scale: [1, 1.3, 1], opacity: [0.3, 0.1, 0.3] }}\r\n        transition={{ duration: 2, repeat: Infinity, ease: \"easeInOut\" }}\r\n        style={{ width: `${avatarSize + 20}px`, height: `${avatarSize + 20}px`, left: '-10px', top: '-10px' }}\r\n      />\r\n      <BaseAvatar size={avatarSize} style={{ filter: 'drop-shadow(0 5px 15px rgba(255, 255, 255, 0.8))' }} />\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n// Message avatar variant\r\nexport const MessageSaiAvatar: React.FC<{ size?: number; isStreaming?: boolean }> = ({ size = 36, isStreaming = false }) => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  const avatarSize = isMobile ? MOBILE_AVATAR_SIZE : size;\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"flex items-center justify-center relative\"\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}\r\n      whileHover={!isStreaming ? { scale: 1.1 } : {}}\r\n      transition={{ duration: 0.2 }}\r\n    >\r\n      <motion.div\r\n        animate={isStreaming ? {\r\n          rotate: 360\r\n        } : {}}\r\n        transition={isStreaming ? {\r\n          rotate: {\r\n            duration: 3,\r\n            repeat: Infinity,\r\n            ease: \"linear\"\r\n          }\r\n        } : {}}\r\n        style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center'\r\n        }}\r\n      >\r\n        {isStreaming && (\r\n          <motion.div\r\n            className=\"absolute inset-0 bg-primary-500 rounded-full\"\r\n            animate={{\r\n              scale: [1, 1.4, 1],\r\n              opacity: [0.3, 0.1, 0.3]\r\n            }}\r\n            transition={{\r\n              duration: 2,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\"\r\n            }}\r\n            style={{ width: `${avatarSize}px`, height: `${avatarSize}px` }}\r\n          />\r\n        )}\r\n\r\n        <WhiteBotIcon\r\n          size={avatarSize}\r\n          style={{\r\n            filter: isStreaming\r\n              ? 'drop-shadow(0 0 15px rgba(255, 255, 255, 0.9))'\r\n              : 'drop-shadow(0 6px 12px rgba(0, 0, 0, 0.25))'\r\n          }}\r\n        />\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/app/constants/chatConstants.ts"],"sourcesContent":["// app/constants/chatConstants.ts\r\n\r\nexport const URLS = {\r\n  CALENDLY: 'https://calendly.com/strivetech',\r\n  STRIVE_WEBSITE: 'https://strivetech.ai',\r\n  GROQ_CONSOLE: 'https://console.groq.com'\r\n};\r\n\r\n// Service cards for full mode - REAL ESTATE SPECIFIC\r\nexport const SERVICE_CARDS = [\r\n  {\r\n    icon: 'TrendingUp',\r\n    title: 'Lead Generation',\r\n    description: 'AI-powered lead qualification and automated nurturing to convert more prospects.',\r\n    color: 'primary',\r\n    gradientFrom: 'from-primary-500',\r\n    gradientTo: 'to-primary-600'\r\n  },\r\n  {\r\n    icon: 'Eye',\r\n    title: 'Property Matching',\r\n    description: 'Intelligent buyer-property matching system that finds perfect fits automatically.',\r\n    color: 'blue',\r\n    gradientFrom: 'from-blue-500',\r\n    gradientTo: 'to-blue-600'\r\n  },\r\n  {\r\n    icon: 'MessageCircle',\r\n    title: 'Market Insights',\r\n    description: 'Predictive analytics for pricing trends and market opportunities in your area.',\r\n    color: 'green',\r\n    gradientFrom: 'from-green-500',\r\n    gradientTo: 'to-green-600'\r\n  }\r\n];\r\n\r\n// Animation and UI constants\r\nexport const ANIMATIONS = {\r\n  GLOW_DURATION: 4,\r\n  ROTATE_DURATION: 2,\r\n  PULSE_DURATION: 2,\r\n  BOUNCE_DELAY: 0.2,\r\n  FADE_DURATION: 0.5,\r\n  HOVER_SCALE: 1.05,\r\n  TAP_SCALE: 0.95\r\n};\r\n\r\nexport const SIZES = {\r\n  AVATAR_LARGE: 80,\r\n  AVATAR_MEDIUM: 60,\r\n  AVATAR_SMALL: 36,\r\n  GLOW_OFFSET: 30,\r\n  ICON_SMALL: 12,\r\n  ICON_MEDIUM: 16,\r\n  ICON_LARGE: 20\r\n};\r\n\r\nexport const COLORS = {\r\n  PRIMARY_RGB: '245, 104, 52',\r\n  BLUE_RGB: '59, 130, 246',\r\n  GREEN_RGB: '16, 185, 129',\r\n  RED_RGB: '239, 68, 68',\r\n  PURPLE_RGB: '168, 85, 247'\r\n};\r\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;;;;;;;;AAE1B,MAAM,OAAO;IAClB,UAAU;IACV,gBAAgB;IAChB,cAAc;AAChB;AAGO,MAAM,gBAAgB;IAC3B;QACE,MAAM;QACN,OAAO;QACP,aAAa;QACb,OAAO;QACP,cAAc;QACd,YAAY;IACd;IACA;QACE,MAAM;QACN,OAAO;QACP,aAAa;QACb,OAAO;QACP,cAAc;QACd,YAAY;IACd;IACA;QACE,MAAM;QACN,OAAO;QACP,aAAa;QACb,OAAO;QACP,cAAc;QACd,YAAY;IACd;CACD;AAGM,MAAM,aAAa;IACxB,eAAe;IACf,iBAAiB;IACjB,gBAAgB;IAChB,cAAc;IACd,eAAe;IACf,aAAa;IACb,WAAW;AACb;AAEO,MAAM,QAAQ;IACnB,cAAc;IACd,eAAe;IACf,cAAc;IACd,aAAa;IACb,YAAY;IACZ,aAAa;IACb,YAAY;AACd;AAEO,MAAM,SAAS;IACpB,aAAa;IACb,UAAU;IACV,WAAW;IACX,SAAS;IACT,YAAY;AACd","debugId":null}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/components/%28web%29/features/chatbot/chat-message.tsx"],"sourcesContent":["// components/(web)/features/chatbot/chat-message.tsx\r\n'use client';\r\n\r\nimport React, { memo } from 'react';\r\nimport { User, AlertCircle, Clock, ExternalLink, Calendar } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { MessageSaiAvatar, UserAvatar } from '../../shared/avatars';\r\nimport { URLS } from '@/app/constants/chatConstants';\r\n\r\ninterface ChatMessageProps {\r\n  message: {\r\n    id: string;\r\n    role: 'user' | 'assistant' | 'system';\r\n    content: string;\r\n    timestamp: Date;\r\n    isStreaming?: boolean;\r\n    isThinking?: boolean;\r\n    isPartial?: boolean;\r\n    isError?: boolean;\r\n    isWelcome?: boolean;\r\n    showCalendlyButton?: boolean;\r\n  };\r\n  isStreaming?: boolean;\r\n  mode?: 'full' | 'widget';\r\n  isFirst?: boolean;\r\n}\r\n\r\nconst ChatMessage: React.FC<ChatMessageProps> = memo(({ message, isStreaming = false, mode = 'full', isFirst = false }) => {\r\n  const isUser = message.role === 'user';\r\n  const isError = message.isError;\r\n  const isPartial = message.isPartial;\r\n  const isWelcome = message.isWelcome;\r\n  const isThinking = message.isThinking;\r\n\r\n  const actuallyStreaming = message.isStreaming !== undefined ? message.isStreaming : isStreaming;\r\n\r\n  const handleScheduleClick = () => {\r\n    if (typeof window !== 'undefined') {\r\n      window.open(URLS.CALENDLY, '_blank');\r\n    }\r\n  };\r\n\r\n  const getTimeBasedGreeting = () => {\r\n    const hour = new Date().getHours();\r\n\r\n    if (hour >= 5 && hour < 12) {\r\n      return 'Good Morning';\r\n    } else if (hour >= 12 && hour < 17) {\r\n      return 'Good Afternoon';\r\n    } else if (hour >= 17 && hour < 21) {\r\n      return 'Good Evening';\r\n    } else {\r\n      return 'Good Evening';\r\n    }\r\n  };\r\n\r\n  const formatContent = (content: string) => {\r\n    if (!content) return '';\r\n\r\n    return content.split('\\n').map((line, index) => {\r\n      const trimmedLine = line.trim();\r\n\r\n      if (!trimmedLine) {\r\n        return <div key={index} className=\"h-2\" />;\r\n      }\r\n\r\n      // Bold text formatting\r\n      if (trimmedLine.includes('**')) {\r\n        const parts = trimmedLine.split(/(\\*\\*.*?\\*\\*)/g);\r\n        return (\r\n          <div key={index} className=\"mb-2\">\r\n            {parts.map((part, partIndex) => {\r\n              if (part.startsWith('**') && part.endsWith('**')) {\r\n                const boldText = part.slice(2, -2);\r\n                return (\r\n                  <span key={partIndex} className=\"font-bold text-gray-100\">\r\n                    {boldText}\r\n                  </span>\r\n                );\r\n              }\r\n              return <span key={partIndex}>{part}</span>;\r\n            })}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      // Bullet points\r\n      if (trimmedLine.startsWith('•') || trimmedLine.startsWith('-')) {\r\n        const bulletContent = trimmedLine.substring(1).trim();\r\n        return (\r\n          <motion.div\r\n            key={index}\r\n            className=\"flex items-start space-x-3 my-3\"\r\n            initial={{ opacity: 0, x: -10 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ delay: index * 0.05 }}\r\n          >\r\n            <div className=\"w-6 h-6 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n              <span className=\"text-white text-xs\">•</span>\r\n            </div>\r\n            <span className=\"flex-1 text-sm leading-relaxed font-medium\">{bulletContent}</span>\r\n          </motion.div>\r\n        );\r\n      }\r\n\r\n      // URL formatting - handle Calendly links properly\r\n      if (trimmedLine.includes('calendly.com') || trimmedLine.includes('strivetech.ai') || trimmedLine.includes('http')) {\r\n        if (trimmedLine.includes('calendly.com')) {\r\n          const urlRegex = /(https?:\\/\\/)?calendly\\.com\\/[^\\s]+/g;\r\n\r\n          return (\r\n            <div key={index} className=\"mb-2\">\r\n              {trimmedLine.split(urlRegex).map((part, partIndex) => {\r\n                if (part && part.includes('calendly.com')) {\r\n                  const fullUrl = part.startsWith('http') ? part : `https://${part}`;\r\n                  return (\r\n                    <motion.a\r\n                      key={partIndex}\r\n                      href={fullUrl}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"text-primary-400 hover:text-primary-300 font-semibold underline decoration-2 underline-offset-2 transition-all duration-200 mx-1\"\r\n                      whileHover={{ scale: 1.05 }}\r\n                      whileTap={{ scale: 0.95 }}\r\n                    >\r\n                      {part}\r\n                      <ExternalLink size={12} className=\"inline ml-1\" />\r\n                    </motion.a>\r\n                  );\r\n                }\r\n                return <span key={partIndex}>{part}</span>;\r\n              })}\r\n            </div>\r\n          );\r\n        }\r\n\r\n        const urlRegex = /(https?:\\/\\/[^\\s]+|strivetech\\.ai|[\\w-]+\\.[\\w-]+(?:\\.[\\w-]+)*)/g;\r\n        const parts = trimmedLine.split(urlRegex);\r\n\r\n        return (\r\n          <div key={index} className=\"mb-2\">\r\n            {parts.map((part, partIndex) => {\r\n              if (part && part.match(urlRegex) && !part.includes('calendly')) {\r\n                let url = part;\r\n                const isStrive = part.includes('strivetech.ai');\r\n\r\n                if (!part.startsWith('http')) {\r\n                  url = `https://${part}`;\r\n                }\r\n\r\n                return (\r\n                  <motion.a\r\n                    key={partIndex}\r\n                    href={url}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className={`inline-flex items-center gap-1 font-semibold underline decoration-2 underline-offset-2 transition-all duration-200 mx-1 ${\r\n                      isStrive\r\n                        ? 'text-primary-400 hover:text-primary-300 hover:bg-primary-900/20 px-2 py-1 rounded-md'\r\n                        : 'text-blue-400 hover:text-blue-300'\r\n                    }`}\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                  >\r\n                    {part}\r\n                    <ExternalLink size={12} className=\"inline\" />\r\n                  </motion.a>\r\n                );\r\n              }\r\n              return <span key={partIndex}>{part}</span>;\r\n            })}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      return (\r\n        <div key={index} className=\"mb-2 leading-relaxed\">\r\n          {trimmedLine}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 30, scale: 0.95 }}\r\n      animate={{ opacity: 1, y: 0, scale: 1 }}\r\n      transition={{\r\n        duration: 0.5,\r\n        ease: \"easeOut\",\r\n        type: \"spring\",\r\n        stiffness: 300,\r\n        damping: 25\r\n      }}\r\n      className={`flex items-start ${mode === 'widget' ? 'gap-2' : 'md:gap-3 gap-2'} mb-6 ${isUser ? 'flex-row-reverse' : ''}`}\r\n    >\r\n      {/* Avatar section */}\r\n      <motion.div\r\n        className={`flex-shrink-0 flex items-center justify-center relative ${\r\n          isUser\r\n            ? ''\r\n            : isError\r\n            ? 'w-16 h-16 rounded-full bg-gradient-to-br from-red-500 to-red-600 text-white ring-2 ring-red-200 shadow-lg'\r\n            : mode === 'widget' ? 'w-16 h-16' : 'w-24 h-24'\r\n        }`}\r\n        style={isUser ? { paddingTop: '4px' } : {}}\r\n        whileHover={isError ? { scale: 1.1 } : {}}\r\n        transition={{ duration: 0.2 }}\r\n      >\r\n        {isUser ? (\r\n          <UserAvatar size={mode === 'widget' ? 60 : 80} />\r\n        ) : isError ? (\r\n          <AlertCircle size={28} />\r\n        ) : (\r\n          <MessageSaiAvatar size={mode === 'widget' ? 60 : 80} isStreaming={actuallyStreaming || isThinking} />\r\n        )}\r\n      </motion.div>\r\n\r\n      <div className={`flex flex-col ${isUser ? 'items-end' : 'items-start'} md:max-w-[85%] max-w-full`}>\r\n        {/* Message Bubble */}\r\n        {(!isThinking || message.content) && (\r\n          <motion.div\r\n            className={`message-bubble relative ${\r\n              isUser\r\n                ? 'user-message bg-gradient-to-br from-gray-100/10 via-primary-800/30 to-primary-700/40 border-2 border-primary-600 text-gray-100 shadow-xl md:max-w-[80%] max-w-full'\r\n                : isError\r\n                ? 'error-message bg-gradient-to-br from-red-900/20 to-red-800/20 border-2 border-red-600 text-red-300 md:max-w-[80%] max-w-full'\r\n                : 'bg-gradient-to-br from-blue-900/20 via-indigo-900/20 to-primary-900/20 border-2 border-primary-700 text-gray-200 shadow-xl md:max-w-[80%] max-w-full'\r\n            } ${actuallyStreaming ? 'animate-pulse border-primary-300' : ''} ${\r\n              isPartial ? 'border-orange-300 bg-orange-50' : ''\r\n            }`}\r\n            initial={{ scale: 0.8, opacity: 0, rotate: isUser ? 5 : -5 }}\r\n            animate={{ scale: 1, opacity: 1, rotate: 0 }}\r\n            transition={{ duration: 0.4, ease: \"easeOut\" }}\r\n            whileHover={{ scale: 1.02, y: -2 }}\r\n          >\r\n            <div className=\"text-sm leading-relaxed relative z-10\">\r\n              {formatContent(message.content)}\r\n\r\n              {actuallyStreaming && message.content && (\r\n                <motion.span\r\n                  className=\"inline-block w-2 h-5 ml-0.5 bg-gradient-to-r from-primary-400 to-primary-500 rounded-sm\"\r\n                  animate={{\r\n                    opacity: [1, 0.2, 1],\r\n                    scaleY: [1, 0.8, 1]\r\n                  }}\r\n                  transition={{\r\n                    duration: 0.8,\r\n                    repeat: Infinity,\r\n                    ease: \"easeInOut\"\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              {isPartial && (\r\n                <div className=\"mt-3 p-2 bg-orange-900/20 rounded-md\">\r\n                  <div className=\"text-xs text-orange-300 font-medium flex items-center space-x-1\">\r\n                    <AlertCircle size={12} />\r\n                    <span>Response was interrupted</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Timestamp */}\r\n        <motion.div\r\n          className={`flex items-center space-x-2 text-xs text-gray-500 mt-2 ${isUser ? 'flex-row-reverse space-x-reverse' : ''}`}\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3 }}\r\n        >\r\n          <Clock size={12} />\r\n          <span>\r\n            {message.timestamp && new Date(message.timestamp).toLocaleTimeString([], {\r\n              hour: '2-digit',\r\n              minute: '2-digit'\r\n            })}\r\n          </span>\r\n\r\n          {isError && <span className=\"text-red-300 font-medium\">Error</span>}\r\n          {isPartial && <span className=\"text-orange-300 font-medium\">Partial</span>}\r\n          {isWelcome && (\r\n            <>\r\n              <span>•</span>\r\n              <span className=\"text-primary-400 font-medium\">{getTimeBasedGreeting()}</span>\r\n            </>\r\n          )}\r\n          {actuallyStreaming && !isThinking && (\r\n            <motion.span\r\n              className=\"text-primary-400 font-medium flex items-center space-x-1\"\r\n              animate={{ opacity: [1, 0.6, 1] }}\r\n              transition={{ duration: 1.5, repeat: Infinity }}\r\n            >\r\n              <div className=\"w-2 h-2 bg-primary-500 rounded-full animate-pulse\" />\r\n              <span>Live</span>\r\n            </motion.span>\r\n          )}\r\n          {isThinking && (\r\n            <motion.span\r\n              className=\"text-primary-400 font-medium\"\r\n              animate={{ opacity: [1, 0.6, 1] }}\r\n              transition={{ duration: 1.5, repeat: Infinity }}\r\n            >\r\n              Thinking...\r\n            </motion.span>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n});\r\n\r\nChatMessage.displayName = 'ChatMessage';\r\n\r\nexport default ChatMessage;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1023, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/hooks/use-advanced-chat.ts"],"sourcesContent":["// hooks/useAdvancedChat.ts\r\n'use client';\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\n// Keyboard shortcuts hook\r\nexport const useKeyboardShortcuts = ({\r\n  onSearch,\r\n  onShowShortcuts,\r\n  onClear\r\n}: {\r\n  onSearch?: () => void;\r\n  onShowShortcuts?: () => void;\r\n  onClear?: () => void;\r\n}) => {\r\n  useEffect(() => {\r\n    const handleKeyPress = (e: KeyboardEvent) => {\r\n      // Cmd/Ctrl + K - Quick search\r\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\r\n        e.preventDefault();\r\n        onSearch?.();\r\n      }\r\n      // Cmd/Ctrl + / - Show shortcuts\r\n      if ((e.metaKey || e.ctrlKey) && e.key === '/') {\r\n        e.preventDefault();\r\n        onShowShortcuts?.();\r\n      }\r\n      // Escape - Clear input\r\n      if (e.key === 'Escape') onClear?.();\r\n    };\r\n\r\n    if (typeof window !== 'undefined') {\r\n      window.addEventListener('keydown', handleKeyPress);\r\n      return () => window.removeEventListener('keydown', handleKeyPress);\r\n    }\r\n  }, [onSearch, onShowShortcuts, onClear]);\r\n};\r\n\r\n// Time-based greeting hook\r\nexport const useTimeBasedGreeting = () => {\r\n  const [greeting, setGreeting] = useState('');\r\n  const [timeOfDay, setTimeOfDay] = useState<'morning' | 'afternoon' | 'evening' | 'night'>('morning');\r\n\r\n  useEffect(() => {\r\n    const hour = new Date().getHours();\r\n\r\n    if (hour >= 5 && hour < 12) {\r\n      setGreeting('Good morning');\r\n      setTimeOfDay('morning');\r\n    } else if (hour >= 12 && hour < 17) {\r\n      setGreeting('Good afternoon');\r\n      setTimeOfDay('afternoon');\r\n    } else if (hour >= 17 && hour < 21) {\r\n      setGreeting('Good evening');\r\n      setTimeOfDay('evening');\r\n    } else {\r\n      setGreeting('Welcome');\r\n      setTimeOfDay('night');\r\n    }\r\n  }, []);\r\n\r\n  return { greeting, timeOfDay };\r\n};\r\n\r\n// Network status hook\r\nexport const useNetworkStatus = () => {\r\n  const [isOnline, setIsOnline] = useState(true);\r\n  const [connectionSpeed, setConnectionSpeed] = useState('4g');\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || typeof navigator === 'undefined') return;\r\n\r\n    setIsOnline(navigator.onLine);\r\n\r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    // Check connection speed if available\r\n    if ('connection' in navigator) {\r\n      const connection = (navigator as any).connection;\r\n      setConnectionSpeed(connection?.effectiveType || '4g');\r\n\r\n      const handleConnectionChange = () => setConnectionSpeed(connection?.effectiveType || '4g');\r\n      connection?.addEventListener('change', handleConnectionChange);\r\n\r\n      return () => {\r\n        window.removeEventListener('online', handleOnline);\r\n        window.removeEventListener('offline', handleOffline);\r\n        connection?.removeEventListener('change', handleConnectionChange);\r\n      };\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  return { isOnline, connectionSpeed };\r\n};\r\n\r\n// Idle detection hook\r\nexport const useIdleDetection = (timeout: number = 60000) => {\r\n  const [isIdle, setIsIdle] = useState(false);\r\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const resetTimer = useCallback(() => {\r\n    setIsIdle(false);\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n    }\r\n    timeoutRef.current = setTimeout(() => setIsIdle(true), timeout);\r\n  }, [timeout]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];\r\n\r\n    events.forEach(event => document.addEventListener(event, resetTimer, true));\r\n    resetTimer();\r\n\r\n    return () => {\r\n      events.forEach(event => document.removeEventListener(event, resetTimer, true));\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n    };\r\n  }, [resetTimer]);\r\n\r\n  return isIdle;\r\n};\r\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;;;;;;AAG3B;AAFA;;AAKO,MAAM,uBAAuB,CAAC,EACnC,QAAQ,EACR,eAAe,EACf,OAAO,EAKR;IACC,IAAA,kNAAS,EAAC;QACR,MAAM,iBAAiB,CAAC;YACtB,8BAA8B;YAC9B,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,KAAK;gBAC7C,EAAE,cAAc;gBAChB;YACF;YACA,gCAAgC;YAChC,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,KAAK;gBAC7C,EAAE,cAAc;gBAChB;YACF;YACA,uBAAuB;YACvB,IAAI,EAAE,GAAG,KAAK,UAAU;QAC1B;QAEA;;IAIF,GAAG;QAAC;QAAU;QAAiB;KAAQ;AACzC;AAGO,MAAM,uBAAuB;IAClC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgD;IAE1F,IAAA,kNAAS,EAAC;QACR,MAAM,OAAO,IAAI,OAAO,QAAQ;QAEhC,IAAI,QAAQ,KAAK,OAAO,IAAI;YAC1B,YAAY;YACZ,aAAa;QACf,OAAO,IAAI,QAAQ,MAAM,OAAO,IAAI;YAClC,YAAY;YACZ,aAAa;QACf,OAAO,IAAI,QAAQ,MAAM,OAAO,IAAI;YAClC,YAAY;YACZ,aAAa;QACf,OAAO;YACL,YAAY;YACZ,aAAa;QACf;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAU;IAAU;AAC/B;AAGO,MAAM,mBAAmB;IAC9B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,IAAA,kNAAS,EAAC;QACR,wCAAuE;;;QAIvE,MAAM;QACN,MAAM;IAwBR,GAAG,EAAE;IAEL,OAAO;QAAE;QAAU;IAAgB;AACrC;AAGO,MAAM,mBAAmB,CAAC,UAAkB,KAAK;IACtD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,aAAa,IAAA,+MAAM,EAAwB;IAEjD,MAAM,aAAa,IAAA,oNAAW,EAAC;QAC7B,UAAU;QACV,IAAI,WAAW,OAAO,EAAE;YACtB,aAAa,WAAW,OAAO;QACjC;QACA,WAAW,OAAO,GAAG,WAAW,IAAM,UAAU,OAAO;IACzD,GAAG;QAAC;KAAQ;IAEZ,IAAA,kNAAS,EAAC;QACR,wCAAmC;;;QAEnC,MAAM;IAWR,GAAG;QAAC;KAAW;IAEf,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/components/%28web%29/features/chatbot/chat-input.tsx"],"sourcesContent":["// components/(web)/features/chatbot/chat-input.tsx\r\n'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Send, Loader2, Square, MessageSquare, Calendar, Sparkles, Zap, ArrowRight } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useIdleDetection } from '@/hooks/use-advanced-chat';\r\n\r\ninterface ChatInputProps {\r\n  onSendMessage: (message: string) => void;\r\n  isLoading: boolean;\r\n  disabled: boolean;\r\n  onStop: () => void;\r\n  onClear?: () => void;\r\n  onScheduleClick: () => void;\r\n  mode?: 'full' | 'widget';\r\n  messageCount?: number;\r\n}\r\n\r\nconst ChatInput: React.FC<ChatInputProps> = ({\r\n  onSendMessage,\r\n  isLoading,\r\n  disabled,\r\n  onStop,\r\n  onClear,\r\n  onScheduleClick,\r\n  mode = 'full',\r\n  messageCount = 0\r\n}) => {\r\n  const [message, setMessage] = useState('');\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const [showQuestions, setShowQuestions] = useState(false);\r\n  const [currentCategory, setCurrentCategory] = useState(0);\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n  const isIdle = useIdleDetection(60000);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (message.trim() && !disabled && !isLoading) {\r\n      onSendMessage(message);\r\n      setMessage('');\r\n\r\n      if (typeof window !== 'undefined') {\r\n        const messageCountStorage = parseInt(localStorage.getItem('strive-message-count') || '0');\r\n        localStorage.setItem('strive-message-count', (messageCountStorage + 1).toString());\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n    if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const textarea = textareaRef.current;\r\n    if (textarea) {\r\n      textarea.style.height = 'auto';\r\n      const newHeight = Math.min(textarea.scrollHeight, 140);\r\n      textarea.style.height = `${newHeight}px`;\r\n    }\r\n  }, [message]);\r\n\r\n  useEffect(() => {\r\n    if (!isIdle) textareaRef.current?.focus();\r\n  }, [isIdle]);\r\n\r\n  useEffect(() => {\r\n    if (message.length > 0) {\r\n      setShowQuestions(false);\r\n    }\r\n  }, [message]);\r\n\r\n  // REAL ESTATE SPECIFIC QUESTIONS\r\n  const sampleQuestions = [\r\n    {\r\n      category: \"Getting Started\",\r\n      questions: [\r\n        \"I need help finding my dream home\",\r\n        \"What's my property worth in today's market?\",\r\n        \"How can AI help me attract more qualified buyers?\"\r\n      ]\r\n    },\r\n    {\r\n      category: \"Common Challenges\",\r\n      questions: [\r\n        \"My listings are sitting on the market too long\",\r\n        \"I'm not getting enough qualified leads\",\r\n        \"How do I stand out from other agents?\"\r\n      ]\r\n    },\r\n    {\r\n      category: \"Cost & Implementation\",\r\n      questions: [\r\n        \"How much does it cost to get started?\",\r\n        \"What's the typical implementation timeline?\",\r\n        \"Do I need a technical team to use this?\"\r\n      ]\r\n    }\r\n  ];\r\n\r\n  const currentQuestions = sampleQuestions[currentCategory].questions;\r\n\r\n  const handleSampleQuestion = (question: string) => {\r\n    setMessage(question);\r\n    setShowQuestions(false);\r\n    textareaRef.current?.focus();\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-800 border-t border-gray-600 relative\">\r\n      {/* Idle user prompt - REAL ESTATE */}\r\n      <AnimatePresence>\r\n        {isIdle && message.length > 1 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className=\"absolute -top-40 left-6 right-6 z-20\"\r\n          >\r\n            <div className=\"bg-gray-700 border border-gray-600 text-gray-300 rounded-lg p-3 text-sm\">\r\n              Still there? I'm here whenever you're ready to continue exploring real estate solutions!\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* CTA Box + Sample questions - hidden in widget mode */}\r\n      <AnimatePresence>\r\n        {!message && !isLoading && mode !== 'widget' && (\r\n          <motion.div\r\n            initial={{ opacity: 0, height: 0 }}\r\n            animate={{ opacity: 1, height: \"auto\" }}\r\n            exit={{ opacity: 0, height: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n            className=\"bg-gray-800\"\r\n          >\r\n            {/* \"Ready to discuss your real estate strategy?\" CTA */}\r\n            {messageCount > 1 && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.3 }}\r\n                className=\"px-4 pt-4 pb-2\"\r\n              >\r\n                <div className=\"p-4 bg-gray-800 border border-gray-600 rounded-xl glow-orange-subtle\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-3 group hidden md:flex\">\r\n                      <motion.div\r\n                        className=\"w-12 h-12 rounded-full flex items-center justify-center bg-gradient-to-br from-primary-600 to-primary-700\"\r\n                        whileHover={{ rotate: 360 }}\r\n                        transition={{ duration: 0.5, ease: \"linear\" }}\r\n                      >\r\n                        <Calendar size={20} className=\"text-white\" />\r\n                      </motion.div>\r\n                      <div>\r\n                        <h4 className=\"font-semibold text-base text-gray-200\">Ready to discuss your real estate strategy?</h4>\r\n                        <p className=\"text-sm text-gray-400\">Let's explore how AI can transform your business</p>\r\n                      </div>\r\n                    </div>\r\n                    <motion.button\r\n                      onClick={onScheduleClick}\r\n                      className=\"brand-orange-button px-8 py-3 text-white rounded-xl font-semibold flex items-center space-x-2 text-sm w-full md:w-auto justify-center\"\r\n                      whileHover={{ scale: 1.02 }}\r\n                      whileTap={{ scale: 0.98 }}\r\n                      transition={{ duration: 0.15 }}\r\n                    >\r\n                      <Calendar size={16} />\r\n                      <span>Schedule Free Consultation</span>\r\n                      <ArrowRight size={16} />\r\n                    </motion.button>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* Categories and Questions Section */}\r\n            <div className=\"px-4 py-4 border-b border-gray-700\">\r\n              {/* Category tabs */}\r\n              <div className=\"flex items-center justify-between mb-0\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  {sampleQuestions.map((category, index) => (\r\n                    <motion.button\r\n                      key={index}\r\n                      onClick={() => {\r\n                        if (currentCategory === index && showQuestions) {\r\n                          setShowQuestions(false);\r\n                        } else {\r\n                          setCurrentCategory(index);\r\n                          setShowQuestions(true);\r\n                        }\r\n                      }}\r\n                      className={`text-xs px-3 py-1.5 rounded-full transition-all duration-300 font-medium flex items-center space-x-1 ${\r\n                        currentCategory === index && showQuestions\r\n                          ? 'bg-primary-600 text-white'\r\n                          : 'bg-gray-700 hover:bg-gray-600 text-gray-300'\r\n                      }`}\r\n                      whileHover={{ scale: 1.02 }}\r\n                      whileTap={{ scale: 0.98 }}\r\n                    >\r\n                      {index === 0 && <Sparkles size={12} />}\r\n                      {index === 1 && <MessageSquare size={12} />}\r\n                      {index === 2 && <Zap size={12} />}\r\n                      <span>{category.category}</span>\r\n                    </motion.button>\r\n                  ))}\r\n                </div>\r\n\r\n                <motion.button\r\n                  onClick={onScheduleClick}\r\n                  className=\"text-xs px-3 py-1.5 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-500 hover:to-primary-600 text-white rounded-full transition-all duration-300 font-medium flex items-center space-x-1 hidden md:flex\"\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  <Calendar size={12} />\r\n                  <span>Book Call</span>\r\n                </motion.button>\r\n              </div>\r\n\r\n              {/* Questions for selected category */}\r\n              <AnimatePresence>\r\n                {showQuestions && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, height: 0 }}\r\n                    animate={{ opacity: 1, height: \"auto\" }}\r\n                    exit={{ opacity: 0, height: 0 }}\r\n                    transition={{ duration: 0.3 }}\r\n                    className=\"space-y-2 mt-4\"\r\n                  >\r\n                    {currentQuestions.map((question, index) => (\r\n                      <motion.button\r\n                        key={`${currentCategory}-${index}`}\r\n                        onClick={() => handleSampleQuestion(question)}\r\n                        className=\"w-full text-left text-sm px-4 py-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 hover:border-primary-600 text-gray-300 hover:text-primary-400 rounded-xl transition-all duration-300 group\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: index * 0.05 }}\r\n                        whileHover={{ scale: 1.01 }}\r\n                        whileTap={{ scale: 0.99 }}\r\n                      >\r\n                        <div className=\"flex items-start space-x-3\">\r\n                          <MessageSquare size={16} className=\"text-primary-400 mt-0.5 flex-shrink-0\" />\r\n                          <span className=\"leading-relaxed font-medium\">{question}</span>\r\n                        </div>\r\n                      </motion.button>\r\n                    ))}\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Main input area - REAL ESTATE PLACEHOLDER */}\r\n      <form onSubmit={handleSubmit} className=\"flex items-center space-x-2 p-3\">\r\n        <div className={`flex-1 relative ${isFocused ? 'ring-2 ring-primary-600 ring-opacity-50 rounded-xl' : ''}`}>\r\n          <textarea\r\n            ref={textareaRef}\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            onKeyDown={handleKeyPress}\r\n            onFocus={() => setIsFocused(true)}\r\n            onBlur={() => setIsFocused(false)}\r\n            placeholder={typeof window !== 'undefined' && window.innerWidth < 768 ? \"Your real estate needs...\" : \"Tell me about your real estate needs...\"}\r\n            className=\"chat-input w-full align-bottom\"\r\n            style={{\r\n              minHeight: '52px',\r\n              maxHeight: '140px',\r\n              lineHeight: '1.5',\r\n              whiteSpace: 'pre-wrap',\r\n              wordBreak: 'break-word',\r\n              overflowWrap: 'break-word',\r\n            }}\r\n            disabled={disabled}\r\n            rows={1}\r\n          />\r\n\r\n          {message.length > 200 && (\r\n            <div className=\"absolute bottom-2 right-2 text-xs text-gray-500 bg-gray-700 px-1 rounded\">\r\n              {message.length}/2000\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          {/* Stop button */}\r\n          <AnimatePresence>\r\n            {isLoading && (\r\n              <motion.button\r\n                type=\"button\"\r\n                onClick={onStop}\r\n                className=\"p-3 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 glow-orange-subtle\"\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n                initial={{ opacity: 0, scale: 0.8 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                exit={{ opacity: 0, scale: 0.8 }}\r\n              >\r\n                <Square size={18} />\r\n              </motion.button>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          {/* Send button */}\r\n          <motion.button\r\n            type=\"submit\"\r\n            disabled={!message.trim() || disabled || isLoading}\r\n            className=\"send-button\"\r\n            whileHover={!disabled && message.trim() ? { scale: 1.02 } : {}}\r\n            whileTap={!disabled && message.trim() ? { scale: 0.98 } : {}}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <AnimatePresence mode=\"wait\">\r\n              {isLoading ? (\r\n                <motion.div key=\"loading\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\r\n                  <Loader2 size={20} className=\"animate-spin\" />\r\n                </motion.div>\r\n              ) : (\r\n                <motion.div key=\"send\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\r\n                  <Send size={20} />\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </motion.button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Status bar */}\r\n      <div className=\"px-4 py-2 bg-gray-800 border-t border-gray-700\">\r\n        <div className=\"flex items-center justify-between text-xs text-gray-400\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex items-center space-x-1 text-green-400\">\r\n              <div className=\"w-2 h-2 bg-green-500 rounded-full\" />\r\n              <span>Sai ready</span>\r\n            </div>\r\n\r\n            <motion.button\r\n              onClick={onScheduleClick}\r\n              className=\"text-primary-400 hover:text-primary-300 font-medium transition-all duration-300 flex items-center space-x-1\"\r\n              whileHover={{ scale: 1.02 }}\r\n            >\r\n              <Calendar size={12} />\r\n              <span>Free consultation available</span>\r\n            </motion.button>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-3\">\r\n            <span className=\"hidden sm:inline\">STRIVE TECH LLC</span>\r\n            {onClear && (\r\n              <button onClick={onClear} className=\"hover:text-gray-200 transition-all duration-300\">\r\n                New chat\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInput;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1895, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/hooks/use-chat.ts"],"sourcesContent":["// hooks/use-chat.ts\r\n'use client';\r\n\r\nimport { useState, useCallback, useRef, useEffect } from 'react';\r\nimport { toast } from 'react-hot-toast';\r\nimport {\r\n  getWelcomeMessage,\r\n  performBasicGrammarCheck,\r\n  detectProblemsClientSide,\r\n  determineConversationStage,\r\n  getCurrentDateContext\r\n} from '../../(platform)/hooks/use-chat-helpers';\r\n\r\n// ✨ NEW: Property Match interface for real estate\r\ninterface PropertyMatch {\r\n  property: {\r\n    id: string;\r\n    address: string;\r\n    city: string;\r\n    state: string;\r\n    zipCode: string;\r\n    price: number;\r\n    bedrooms: number;\r\n    bathrooms: number;\r\n    sqft: number;\r\n    propertyType: string;\r\n    images: string[];\r\n    daysOnMarket: number;\r\n    schoolRatings?: {\r\n      elementary?: number;\r\n      middle?: number;\r\n      high?: number;\r\n    };\r\n  };\r\n  matchScore: number;\r\n  matchReasons: string[];\r\n  missingFeatures: string[];\r\n}\r\n\r\ninterface Message {\r\n  id: string;\r\n  role: 'user' | 'assistant' | 'system';\r\n  content: string;\r\n  timestamp: Date;\r\n  conversationId?: string;\r\n  isStreaming?: boolean;\r\n  isThinking?: boolean;\r\n  isPartial?: boolean;\r\n  isError?: boolean;\r\n  isWelcome?: boolean;\r\n  showCalendlyButton?: boolean;\r\n  propertyResults?: PropertyMatch[]; // ✨ NEW: For real estate property results\r\n}\r\n\r\ninterface ProblemDetection {\r\n  key: string;\r\n  confidence: 'low' | 'medium' | 'high';\r\n  urgency: 'low' | 'medium' | 'high';\r\n  matchedKeywords: string[];\r\n}\r\n\r\ninterface ChatStats {\r\n  totalMessages: number;\r\n  userMessages: number;\r\n  assistantMessages: number;\r\n  conversationId: string;\r\n  hasApiKey: boolean;\r\n  isStreaming: boolean;\r\n  identifiedProblems: string[];\r\n  conversationStage: string;\r\n  needsConsultation: boolean;\r\n}\r\n\r\nexport const useChat = (industry: string = 'strive') => {\r\n  const [messages, setMessages] = useState<Message[]>(() => [getWelcomeMessage()]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [streamingMessage, setStreamingMessage] = useState('');\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [identifiedProblems, setIdentifiedProblems] = useState<ProblemDetection[]>([]);\r\n  const [conversationStage, setConversationStage] = useState('discovery');\r\n  const [hasShownCalendlyButton, setHasShownCalendlyButton] = useState(false);\r\n  const [hasSavedChat, setHasSavedChat] = useState(false);\r\n  \r\n  const abortControllerRef = useRef<AbortController | null>(null);\r\n  const conversationIdRef = useRef(`conv-${Date.now()}`);\r\n  const streamingIdRef = useRef<string | null>(null);\r\n\r\n  // Generate session ID once - invoke function immediately\r\n  const getSessionId = () => {\r\n    if (typeof window !== 'undefined') {\r\n      const stored = sessionStorage.getItem('strive-session-id');\r\n      if (stored) return stored;\r\n      const newId = `session-${Date.now()}-${Math.random().toString(36).substring(7)}`;\r\n      sessionStorage.setItem('strive-session-id', newId);\r\n      return newId;\r\n    }\r\n    return `session-${Date.now()}`;\r\n  };\r\n  const sessionIdRef = useRef<string>(getSessionId());\r\n\r\n  // Load saved chat on mount\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    \r\n    try {\r\n      const saved = localStorage.getItem('strive-chat-history');\r\n      if (saved) {\r\n        const parsedHistory = JSON.parse(saved);\r\n        if (parsedHistory.messages?.length > 1) {\r\n          setHasSavedChat(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load chat history:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Load previous conversation\r\n  const loadPreviousChat = useCallback(() => {\r\n    if (typeof window === 'undefined') return;\r\n    \r\n    try {\r\n      const saved = localStorage.getItem('strive-chat-history');\r\n      if (saved) {\r\n        const parsedHistory = JSON.parse(saved);\r\n        if (parsedHistory.messages?.length > 1) {\r\n          setMessages(parsedHistory.messages);\r\n          if (parsedHistory.identifiedProblems) {\r\n            setIdentifiedProblems(parsedHistory.identifiedProblems);\r\n          }\r\n          if (parsedHistory.stage) {\r\n            setConversationStage(parsedHistory.stage);\r\n          }\r\n          setHasSavedChat(false);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load chat history:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Clear error\r\n  const clearError = useCallback(() => setError(null), []);\r\n\r\n  // Send message with RAG integration\r\n  const sendMessage = useCallback(async (userMessage: string) => {\r\n    if (!userMessage.trim() || isLoading) return;\r\n\r\n    // Check if user wants to continue previous chat\r\n    if (userMessage.toLowerCase().trim() === 'yes' && hasSavedChat) {\r\n      loadPreviousChat();\r\n      return;\r\n    }\r\n\r\n    clearError();\r\n\r\n    // Client-side problem detection (basic)\r\n    const detectedProblems = detectProblemsClientSide(userMessage);\r\n    if (detectedProblems.length > 0) {\r\n      setIdentifiedProblems(prev => {\r\n        const newProblems = [...prev];\r\n        detectedProblems.forEach(problem => {\r\n          if (!newProblems.find(p => p.key === problem.key)) {\r\n            newProblems.push(problem);\r\n          }\r\n        });\r\n        return newProblems;\r\n      });\r\n    }\r\n\r\n    // Update conversation stage\r\n    const messageCount = messages.filter(m => m.role === 'user').length + 1;\r\n    const newStage = determineConversationStage(messageCount, identifiedProblems.length + detectedProblems.length);\r\n    setConversationStage(newStage);\r\n\r\n    // Add user message\r\n    const newUserMessage: Message = {\r\n      id: `user-${Date.now()}`,\r\n      role: 'user',\r\n      content: userMessage.trim(),\r\n      timestamp: new Date(),\r\n      conversationId: conversationIdRef.current\r\n    };\r\n\r\n    setMessages(prev => [...prev, newUserMessage]);\r\n    setIsLoading(true);\r\n    setStreamingMessage('');\r\n\r\n    // Create assistant placeholder\r\n    const assistantMessageId = `assistant-${Date.now()}`;\r\n    streamingIdRef.current = assistantMessageId;\r\n    \r\n    const assistantMessage: Message = {\r\n      id: assistantMessageId,\r\n      role: 'assistant',\r\n      content: 'Thinking...',\r\n      timestamp: new Date(),\r\n      conversationId: conversationIdRef.current,\r\n      isStreaming: true,\r\n      isThinking: true,\r\n    };\r\n\r\n    setMessages(prev => [...prev, assistantMessage]);\r\n\r\n    try {\r\n      // Small delay for UX\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n\r\n      // Prepare messages for API (exclude welcome and system messages)\r\n      const apiMessages = [...messages, newUserMessage]\r\n        .filter(m => !m.isWelcome && m.role !== 'system')\r\n        .slice(-10) // Last 10 messages for context\r\n        .map(m => ({\r\n          role: m.role as 'user' | 'assistant',\r\n          content: m.content\r\n        }));\r\n\r\n      // ✅ ADD DATE CONTEXT - Prepend current date as system message\r\n      const messagesWithContext = [\r\n        {\r\n          role: 'system' as const,\r\n          content: getCurrentDateContext()\r\n        },\r\n        ...apiMessages\r\n      ];\r\n\r\n      // 🔥 CRITICAL: Call Next.js API route with RAG integration\r\n      const response = await fetch('/api/chat', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          messages: messagesWithContext,\r\n          industry,\r\n          sessionId: sessionIdRef.current,\r\n          conversationStage: newStage,\r\n          detectedProblems: [...identifiedProblems, ...detectedProblems].map(p => p.key),\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`API error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      // Handle Server-Sent Events (SSE) streaming\r\n      const reader = response.body?.getReader();\r\n      const decoder = new TextDecoder();\r\n      let accumulatedResponse = '';\r\n      let propertyResults: PropertyMatch[] | undefined; // ✨ NEW: Store property results\r\n\r\n      if (!reader) {\r\n        throw new Error('No response body');\r\n      }\r\n\r\n      while (true) {\r\n        const { value, done } = await reader.read();\r\n        if (done) break;\r\n\r\n        const chunk = decoder.decode(value);\r\n        const lines = chunk.split('\\n');\r\n\r\n        for (const line of lines) {\r\n          if (!line.startsWith('data: ')) continue;\r\n          \r\n          const data = line.slice(6).trim();\r\n          \r\n          if (data === '[DONE]') {\r\n            // Stream complete\r\n            const checkedResponse = performBasicGrammarCheck(accumulatedResponse);\r\n            \r\n            setMessages(prev => prev.map(msg => \r\n              msg.id === assistantMessageId \r\n                ? { \r\n                    ...msg, \r\n                    content: checkedResponse,\r\n                    propertyResults, // ✨ NEW: Attach property results\r\n                    isStreaming: false, \r\n                    isThinking: false\r\n                  }\r\n                : msg\r\n            ));\r\n            setStreamingMessage('');\r\n            setIsLoading(false);\r\n            return;\r\n          }\r\n          \r\n          if (data) {\r\n            try {\r\n              const parsed = JSON.parse(data);\r\n              \r\n              // ✨ NEW: Handle regular content\r\n              if (parsed.content) {\r\n                accumulatedResponse += parsed.content;\r\n                \r\n                // Update streaming message in real-time\r\n                setMessages(prev => prev.map(msg => \r\n                  msg.id === assistantMessageId \r\n                    ? { ...msg, content: accumulatedResponse, isThinking: false }\r\n                    : msg\r\n                ));\r\n              }\r\n\r\n              // ✨ NEW: Handle property results\r\n              if (parsed.type === 'property_results') {\r\n                propertyResults = parsed.properties;\r\n                console.log('🏠 Received property results:', propertyResults);\r\n\r\n                // Update message with property results immediately\r\n                setMessages(prev => prev.map(msg => \r\n                  msg.id === assistantMessageId \r\n                    ? { ...msg, propertyResults }\r\n                    : msg\r\n                ));\r\n              }\r\n\r\n              // ✨ NEW: Handle property search errors\r\n              if (parsed.type === 'property_search_error') {\r\n                toast.error(parsed.error || 'Failed to search properties');\r\n              }\r\n            } catch (parseError) {\r\n              console.warn('Failed to parse SSE data:', data);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n    } catch (error: any) {\r\n      console.error('Chat error:', error);\r\n      handleStreamError(error, '', streamingIdRef.current);\r\n    } finally {\r\n      setIsLoading(false);\r\n      abortControllerRef.current = null;\r\n      streamingIdRef.current = null;\r\n    }\r\n  }, [messages, isLoading, clearError, identifiedProblems, conversationStage, industry, hasSavedChat, loadPreviousChat]);\r\n\r\n  // Handle streaming errors\r\n  const handleStreamError = useCallback((error: any, partialResponse: string, messageId: string | null) => {\r\n    console.error('Chat error:', error);\r\n    setStreamingMessage('');\r\n    \r\n    const errorMessage = 'I apologize for the technical issue. Let\\'s continue - what were you telling me about your business?';\r\n    \r\n    if (partialResponse?.trim() && messageId) {\r\n      setMessages(prev => prev.map(msg => \r\n        msg.id === messageId \r\n          ? { \r\n              ...msg, \r\n              content: partialResponse + '\\n\\n*[Connection interrupted - please continue]*',\r\n              isPartial: true,\r\n              isStreaming: false,\r\n              isThinking: false\r\n            }\r\n          : msg\r\n      ));\r\n    } else if (messageId) {\r\n      setMessages(prev => prev.map(msg => \r\n        msg.id === messageId \r\n          ? { ...msg, content: errorMessage, isError: true, isStreaming: false, isThinking: false }\r\n          : msg\r\n      ));\r\n    }\r\n\r\n    setError(error.message);\r\n    toast.error('Connection issue - please retry', { duration: 3000 });\r\n  }, []);\r\n\r\n  // Clear messages\r\n  const clearMessages = useCallback(() => {\r\n    setMessages([getWelcomeMessage()]);\r\n    setStreamingMessage('');\r\n    setError(null);\r\n    setIdentifiedProblems([]);\r\n    setConversationStage('discovery');\r\n    setHasShownCalendlyButton(false);\r\n    conversationIdRef.current = `conv-${Date.now()}`;\r\n    \r\n    if (typeof window !== 'undefined') {\r\n      localStorage.removeItem('strive-chat-history');\r\n    }\r\n  }, []);\r\n\r\n  // Stop generation\r\n  const stopGeneration = useCallback(() => {\r\n    if (abortControllerRef.current) {\r\n      abortControllerRef.current.abort();\r\n      \r\n      if (streamingIdRef.current) {\r\n        setMessages(prev => prev.map(msg => \r\n          msg.id === streamingIdRef.current \r\n            ? { ...msg, isStreaming: false, isThinking: false }\r\n            : msg\r\n        ));\r\n      }\r\n      \r\n      setIsLoading(false);\r\n      setStreamingMessage('');\r\n      streamingIdRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // Retry last message\r\n  const retryLastMessage = useCallback(() => {\r\n    const lastUserMessage = [...messages].reverse().find(msg => msg.role === 'user');\r\n    if (lastUserMessage) {\r\n      setMessages(prev => prev.filter(msg => !(msg.role === 'assistant' && (msg.isError || msg.isPartial))));\r\n      sendMessage(lastUserMessage.content);\r\n    }\r\n  }, [messages, sendMessage]);\r\n\r\n  // Get stats\r\n  const getStats = useCallback((): ChatStats => {\r\n    const userMessages = messages.filter(msg => msg.role === 'user').length;\r\n    const assistantMessages = messages.filter(msg => msg.role === 'assistant' && !msg.isWelcome).length;\r\n    \r\n    return {\r\n      totalMessages: messages.length,\r\n      userMessages,\r\n      assistantMessages,\r\n      conversationId: conversationIdRef.current,\r\n      hasApiKey: true, // In Next.js, API key is always on server\r\n      isStreaming: isLoading && !!streamingIdRef.current,\r\n      identifiedProblems: identifiedProblems.map(p => p.key),\r\n      conversationStage,\r\n      needsConsultation: conversationStage === 'closing' || userMessages >= 8\r\n    };\r\n  }, [messages, isLoading, identifiedProblems, conversationStage]);\r\n\r\n  // Auto-save conversation\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    if (messages.length <= 1) return;\r\n\r\n    try {\r\n      const chatHistory = {\r\n        messages: messages.filter(msg => !msg.isStreaming),\r\n        timestamp: new Date(),\r\n        conversationId: conversationIdRef.current,\r\n        identifiedProblems: identifiedProblems,\r\n        stage: conversationStage\r\n      };\r\n      localStorage.setItem('strive-chat-history', JSON.stringify(chatHistory));\r\n    } catch (error) {\r\n      console.warn('Failed to save chat history:', error);\r\n    }\r\n  }, [messages, identifiedProblems, conversationStage]);\r\n\r\n  return {\r\n    messages,\r\n    isLoading,\r\n    streamingMessage,\r\n    error,\r\n    sendMessage,\r\n    clearMessages,\r\n    stopGeneration,\r\n    retryLastMessage,\r\n    clearError,\r\n    getStats,\r\n    identifiedProblems,\r\n    conversationStage,\r\n    hasShownCalendlyButton,\r\n    hasSavedChat\r\n  };\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2247, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/hooks/use-scroll-manager.ts"],"sourcesContent":["// hooks/useScrollManager.ts\r\n'use client';\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\ninterface Message {\r\n  id: string;\r\n  role: string;\r\n  content: string;\r\n  timestamp: Date;\r\n}\r\n\r\nconst useScrollManager = (messages: Message[], streamingMessage: string) => {\r\n  const [isNearBottom, setIsNearBottom] = useState(true);\r\n  const [showScrollButton, setShowScrollButton] = useState(false);\r\n  const [isAutoScrollEnabled, setIsAutoScrollEnabled] = useState(true);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const lastScrollTop = useRef(0);\r\n  const scrollTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const animationFrameRef = useRef<number | null>(null);\r\n\r\n  const previousMessageCount = useRef(0);\r\n  const previousStreamingContent = useRef('');\r\n  const previousLastMessageContent = useRef('');\r\n\r\n  const NEAR_BOTTOM_THRESHOLD = 100;\r\n\r\n  // Check if user is near bottom\r\n  const checkIfNearBottom = useCallback(() => {\r\n    if (!scrollContainerRef.current) return true;\r\n\r\n    const container = scrollContainerRef.current;\r\n    const { scrollTop, scrollHeight, clientHeight } = container;\r\n    const distanceFromBottom = scrollHeight - (scrollTop + clientHeight);\r\n\r\n    return distanceFromBottom <= NEAR_BOTTOM_THRESHOLD;\r\n  }, []);\r\n\r\n  // Smooth scroll to bottom\r\n  const scrollToBottom = useCallback((force = false, smooth = true) => {\r\n    if (!scrollContainerRef.current && !messagesEndRef.current) return;\r\n\r\n    if (animationFrameRef.current) {\r\n      cancelAnimationFrame(animationFrameRef.current);\r\n    }\r\n\r\n    const performScroll = () => {\r\n      try {\r\n        if (scrollContainerRef.current) {\r\n          const container = scrollContainerRef.current;\r\n          const scrollOptions: ScrollToOptions = {\r\n            top: container.scrollHeight,\r\n            behavior: smooth ? 'smooth' : 'auto'\r\n          };\r\n          container.scrollTo(scrollOptions);\r\n        } else if (messagesEndRef.current) {\r\n          messagesEndRef.current.scrollIntoView({\r\n            behavior: smooth ? 'smooth' : 'auto',\r\n            block: 'end',\r\n            inline: 'nearest'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.warn('Scroll failed:', error);\r\n      }\r\n    };\r\n\r\n    const currentNearBottom = checkIfNearBottom();\r\n    const currentAutoScrollEnabled = isAutoScrollEnabled;\r\n\r\n    if (force || (currentAutoScrollEnabled && currentNearBottom)) {\r\n      animationFrameRef.current = requestAnimationFrame(() => {\r\n        performScroll();\r\n\r\n        setTimeout(() => {\r\n          if (checkIfNearBottom()) {\r\n            setIsNearBottom(true);\r\n            setShowScrollButton(false);\r\n          }\r\n        }, 100);\r\n      });\r\n    }\r\n  }, [checkIfNearBottom, isAutoScrollEnabled]);\r\n\r\n  // Handle manual scroll to bottom\r\n  const handleScrollToBottom = useCallback(() => {\r\n    setIsAutoScrollEnabled(true);\r\n    scrollToBottom(true, true);\r\n  }, [scrollToBottom]);\r\n\r\n  // Scroll event handler\r\n  const handleScroll = useCallback(() => {\r\n    if (!scrollContainerRef.current) return;\r\n\r\n    if (scrollTimeoutRef.current) {\r\n      clearTimeout(scrollTimeoutRef.current);\r\n    }\r\n\r\n    scrollTimeoutRef.current = setTimeout(() => {\r\n      const nearBottom = checkIfNearBottom();\r\n      setIsNearBottom(nearBottom);\r\n      setShowScrollButton(!nearBottom);\r\n      setIsAutoScrollEnabled(nearBottom);\r\n\r\n      if (scrollContainerRef.current) {\r\n        lastScrollTop.current = scrollContainerRef.current.scrollTop;\r\n      }\r\n    }, 100);\r\n  }, [checkIfNearBottom]);\r\n\r\n  // Auto-scroll on new messages\r\n  useEffect(() => {\r\n    const currentMessageCount = messages.length;\r\n\r\n    if (currentMessageCount > previousMessageCount.current && currentMessageCount > 0) {\r\n      setTimeout(() => {\r\n        scrollToBottom(true, true);\r\n      }, 50);\r\n    }\r\n\r\n    previousMessageCount.current = currentMessageCount;\r\n  }, [messages.length, scrollToBottom]);\r\n\r\n  // Auto-scroll during streaming\r\n  useEffect(() => {\r\n    const currentStreamingContent = streamingMessage || '';\r\n\r\n    if (streamingMessage &&\r\n        currentStreamingContent !== previousStreamingContent.current &&\r\n        currentStreamingContent.length > previousStreamingContent.current.length) {\r\n      setTimeout(() => {\r\n        scrollToBottom(false, false);\r\n      }, 10);\r\n    }\r\n\r\n    previousStreamingContent.current = currentStreamingContent;\r\n  }, [streamingMessage, scrollToBottom]);\r\n\r\n  // Auto-scroll on assistant message updates\r\n  useEffect(() => {\r\n    if (messages.length === 0) return;\r\n\r\n    const lastMessage = messages[messages.length - 1];\r\n    const currentLastMessageContent = lastMessage ? lastMessage.content : '';\r\n\r\n    if (lastMessage &&\r\n        lastMessage.role === 'assistant' &&\r\n        currentLastMessageContent !== previousLastMessageContent.current &&\r\n        currentLastMessageContent.length > previousLastMessageContent.current.length &&\r\n        currentLastMessageContent !== 'Thinking...') {\r\n      setTimeout(() => {\r\n        scrollToBottom(true, true);\r\n      }, 50);\r\n    }\r\n\r\n    previousLastMessageContent.current = currentLastMessageContent;\r\n  }, [messages, scrollToBottom]);\r\n\r\n  // Attach scroll listener\r\n  useEffect(() => {\r\n    const container = scrollContainerRef.current;\r\n    if (!container) return;\r\n\r\n    container.addEventListener('scroll', handleScroll, { passive: true });\r\n\r\n    return () => {\r\n      container.removeEventListener('scroll', handleScroll);\r\n      if (scrollTimeoutRef.current) {\r\n        clearTimeout(scrollTimeoutRef.current);\r\n      }\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, [handleScroll]);\r\n\r\n  // Initialize scroll position\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (scrollContainerRef.current) {\r\n        const container = scrollContainerRef.current;\r\n        container.scrollTo({\r\n          top: container.scrollHeight,\r\n          behavior: 'auto'\r\n        });\r\n      }\r\n    }, 100);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return {\r\n    scrollContainerRef,\r\n    messagesEndRef,\r\n    isNearBottom,\r\n    showScrollButton,\r\n    isAutoScrollEnabled,\r\n    scrollToBottom,\r\n    handleScrollToBottom,\r\n    setIsAutoScrollEnabled\r\n  };\r\n};\r\n\r\nexport default useScrollManager;\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAG5B;AAFA;;AAWA,MAAM,mBAAmB,CAAC,UAAqB;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAC;IAE/D,MAAM,qBAAqB,IAAA,+MAAM,EAAiB;IAClD,MAAM,iBAAiB,IAAA,+MAAM,EAAiB;IAC9C,MAAM,gBAAgB,IAAA,+MAAM,EAAC;IAC7B,MAAM,mBAAmB,IAAA,+MAAM,EAAwB;IACvD,MAAM,oBAAoB,IAAA,+MAAM,EAAgB;IAEhD,MAAM,uBAAuB,IAAA,+MAAM,EAAC;IACpC,MAAM,2BAA2B,IAAA,+MAAM,EAAC;IACxC,MAAM,6BAA6B,IAAA,+MAAM,EAAC;IAE1C,MAAM,wBAAwB;IAE9B,+BAA+B;IAC/B,MAAM,oBAAoB,IAAA,oNAAW,EAAC;QACpC,IAAI,CAAC,mBAAmB,OAAO,EAAE,OAAO;QAExC,MAAM,YAAY,mBAAmB,OAAO;QAC5C,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG;QAClD,MAAM,qBAAqB,eAAe,CAAC,YAAY,YAAY;QAEnE,OAAO,sBAAsB;IAC/B,GAAG,EAAE;IAEL,0BAA0B;IAC1B,MAAM,iBAAiB,IAAA,oNAAW,EAAC,CAAC,QAAQ,KAAK,EAAE,SAAS,IAAI;QAC9D,IAAI,CAAC,mBAAmB,OAAO,IAAI,CAAC,eAAe,OAAO,EAAE;QAE5D,IAAI,kBAAkB,OAAO,EAAE;YAC7B,qBAAqB,kBAAkB,OAAO;QAChD;QAEA,MAAM,gBAAgB;YACpB,IAAI;gBACF,IAAI,mBAAmB,OAAO,EAAE;oBAC9B,MAAM,YAAY,mBAAmB,OAAO;oBAC5C,MAAM,gBAAiC;wBACrC,KAAK,UAAU,YAAY;wBAC3B,UAAU,SAAS,WAAW;oBAChC;oBACA,UAAU,QAAQ,CAAC;gBACrB,OAAO,IAAI,eAAe,OAAO,EAAE;oBACjC,eAAe,OAAO,CAAC,cAAc,CAAC;wBACpC,UAAU,SAAS,WAAW;wBAC9B,OAAO;wBACP,QAAQ;oBACV;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,IAAI,CAAC,kBAAkB;YACjC;QACF;QAEA,MAAM,oBAAoB;QAC1B,MAAM,2BAA2B;QAEjC,IAAI,SAAU,4BAA4B,mBAAoB;YAC5D,kBAAkB,OAAO,GAAG,sBAAsB;gBAChD;gBAEA,WAAW;oBACT,IAAI,qBAAqB;wBACvB,gBAAgB;wBAChB,oBAAoB;oBACtB;gBACF,GAAG;YACL;QACF;IACF,GAAG;QAAC;QAAmB;KAAoB;IAE3C,iCAAiC;IACjC,MAAM,uBAAuB,IAAA,oNAAW,EAAC;QACvC,uBAAuB;QACvB,eAAe,MAAM;IACvB,GAAG;QAAC;KAAe;IAEnB,uBAAuB;IACvB,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC/B,IAAI,CAAC,mBAAmB,OAAO,EAAE;QAEjC,IAAI,iBAAiB,OAAO,EAAE;YAC5B,aAAa,iBAAiB,OAAO;QACvC;QAEA,iBAAiB,OAAO,GAAG,WAAW;YACpC,MAAM,aAAa;YACnB,gBAAgB;YAChB,oBAAoB,CAAC;YACrB,uBAAuB;YAEvB,IAAI,mBAAmB,OAAO,EAAE;gBAC9B,cAAc,OAAO,GAAG,mBAAmB,OAAO,CAAC,SAAS;YAC9D;QACF,GAAG;IACL,GAAG;QAAC;KAAkB;IAEtB,8BAA8B;IAC9B,IAAA,kNAAS,EAAC;QACR,MAAM,sBAAsB,SAAS,MAAM;QAE3C,IAAI,sBAAsB,qBAAqB,OAAO,IAAI,sBAAsB,GAAG;YACjF,WAAW;gBACT,eAAe,MAAM;YACvB,GAAG;QACL;QAEA,qBAAqB,OAAO,GAAG;IACjC,GAAG;QAAC,SAAS,MAAM;QAAE;KAAe;IAEpC,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACR,MAAM,0BAA0B,oBAAoB;QAEpD,IAAI,oBACA,4BAA4B,yBAAyB,OAAO,IAC5D,wBAAwB,MAAM,GAAG,yBAAyB,OAAO,CAAC,MAAM,EAAE;YAC5E,WAAW;gBACT,eAAe,OAAO;YACxB,GAAG;QACL;QAEA,yBAAyB,OAAO,GAAG;IACrC,GAAG;QAAC;QAAkB;KAAe;IAErC,2CAA2C;IAC3C,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS,MAAM,KAAK,GAAG;QAE3B,MAAM,cAAc,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE;QACjD,MAAM,4BAA4B,cAAc,YAAY,OAAO,GAAG;QAEtE,IAAI,eACA,YAAY,IAAI,KAAK,eACrB,8BAA8B,2BAA2B,OAAO,IAChE,0BAA0B,MAAM,GAAG,2BAA2B,OAAO,CAAC,MAAM,IAC5E,8BAA8B,eAAe;YAC/C,WAAW;gBACT,eAAe,MAAM;YACvB,GAAG;QACL;QAEA,2BAA2B,OAAO,GAAG;IACvC,GAAG;QAAC;QAAU;KAAe;IAE7B,yBAAyB;IACzB,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY,mBAAmB,OAAO;QAC5C,IAAI,CAAC,WAAW;QAEhB,UAAU,gBAAgB,CAAC,UAAU,cAAc;YAAE,SAAS;QAAK;QAEnE,OAAO;YACL,UAAU,mBAAmB,CAAC,UAAU;YACxC,IAAI,iBAAiB,OAAO,EAAE;gBAC5B,aAAa,iBAAiB,OAAO;YACvC;YACA,IAAI,kBAAkB,OAAO,EAAE;gBAC7B,qBAAqB,kBAAkB,OAAO;YAChD;QACF;IACF,GAAG;QAAC;KAAa;IAEjB,6BAA6B;IAC7B,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,WAAW;YACvB,IAAI,mBAAmB,OAAO,EAAE;gBAC9B,MAAM,YAAY,mBAAmB,OAAO;gBAC5C,UAAU,QAAQ,CAAC;oBACjB,KAAK,UAAU,YAAY;oBAC3B,UAAU;gBACZ;YACF;QACF,GAAG;QAEH,OAAO,IAAM,aAAa;IAC5B,GAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 2433, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/lib/utils/parent-communication.ts"],"sourcesContent":["// app/utils/parentCommunication.ts\r\n'use client';\r\n\r\nclass ParentCommunication {\r\n  private debugMode: boolean;\r\n  private allowedOrigins: string[];\r\n  private parentOrigin: string;\r\n  private messageQueue: any[];\r\n  private isReady: boolean;\r\n\r\n  constructor() {\r\n    // Check for debug mode\r\n    if (typeof window !== 'undefined') {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      this.debugMode = urlParams.get('debug') === 'true' || process.env.NODE_ENV === 'development';\r\n    } else {\r\n      this.debugMode = false;\r\n    }\r\n\r\n    // Allow both production and development origins\r\n    this.allowedOrigins = [\r\n      'https://strivetech.ai',\r\n      'https://www.strivetech.ai',\r\n      'https://strive-website-8xot95578-strive-tech.vercel.app',\r\n      'http://localhost:5000',\r\n      'http://localhost:3000',\r\n      'http://localhost:5173',\r\n      'http://127.0.0.1:5000',\r\n      'http://127.0.0.1:3000',\r\n      'http://127.0.0.1:5173'\r\n    ];\r\n\r\n    this.parentOrigin = this.detectParentOrigin();\r\n    this.messageQueue = [];\r\n    this.isReady = false;\r\n\r\n    if (typeof window !== 'undefined') {\r\n      this.setupEventListeners();\r\n      this.setupResizeObserver();\r\n\r\n      // Send ready message immediately when DOM is loaded\r\n      if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n          this.debugLog('🚀 DOM loaded - sending immediate ready message', true);\r\n          this.sendReadyMessage();\r\n        });\r\n      } else {\r\n        this.debugLog('🚀 DOM already loaded - sending immediate ready message', true);\r\n        setTimeout(() => this.sendReadyMessage(), 100);\r\n      }\r\n    }\r\n\r\n    this.debugLog('🔧 ParentCommunication initialized');\r\n    this.debugLog(`🐛 Debug mode: ${this.debugMode ? 'ENABLED' : 'disabled'}`);\r\n    this.debugLog(`🌐 Parent origin: ${this.parentOrigin}`);\r\n    this.debugLog(`🖼️ In iframe: ${typeof window !== 'undefined' && window.parent !== window}`);\r\n  }\r\n\r\n  debugLog(message: string, force: boolean = false) {\r\n    if (this.debugMode || force) {\r\n      console.log(`[ParentComm] ${message}`);\r\n    }\r\n  }\r\n\r\n  detectParentOrigin(): string {\r\n    if (typeof window === 'undefined') return 'https://strivetech.ai';\r\n\r\n    // Try to get parent origin from URL parameter\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const parentParam = urlParams.get('parent');\r\n    if (parentParam) {\r\n      this.debugLog(`🎯 Parent origin from URL: ${parentParam}`);\r\n      return parentParam;\r\n    }\r\n\r\n    // Try to detect from document referrer\r\n    if (document.referrer) {\r\n      try {\r\n        const referrerUrl = new URL(document.referrer);\r\n        this.debugLog(`🎯 Parent origin from referrer: ${referrerUrl.origin}`);\r\n        return referrerUrl.origin;\r\n      } catch (e) {\r\n        this.debugLog(`⚠️ Could not parse referrer: ${e}`);\r\n      }\r\n    }\r\n\r\n    this.debugLog('🎯 Using default parent origin: https://strivetech.ai');\r\n    return 'https://strivetech.ai';\r\n  }\r\n\r\n  setupEventListeners() {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    // Listen for messages from parent\r\n    window.addEventListener('message', this.handleParentMessage.bind(this));\r\n\r\n    // Notify parent when closing\r\n    window.addEventListener('beforeunload', () => {\r\n      this.sendToParent('close');\r\n    });\r\n\r\n    // Handle visibility changes\r\n    document.addEventListener('visibilitychange', () => {\r\n      this.sendToParent('visibility', {\r\n        visible: document.visibilityState === 'visible'\r\n      });\r\n    });\r\n  }\r\n\r\n  setupResizeObserver() {\r\n    if (typeof window === 'undefined' || !window.ResizeObserver) return;\r\n\r\n    const resizeObserver = new ResizeObserver(() => {\r\n      this.notifyResize();\r\n    });\r\n\r\n    // Observe body for size changes\r\n    resizeObserver.observe(document.body);\r\n\r\n    // Also observe the chat container if it exists\r\n    const chatContainer = document.querySelector('.chat-container');\r\n    if (chatContainer) {\r\n      resizeObserver.observe(chatContainer);\r\n    }\r\n  }\r\n\r\n  handleParentMessage(event: MessageEvent) {\r\n    // Security: validate origin\r\n    if (!this.allowedOrigins.includes(event.origin)) {\r\n      console.warn('Ignored message from untrusted origin:', event.origin);\r\n      return;\r\n    }\r\n\r\n    const { type, data, source } = event.data || {};\r\n\r\n    // Only handle messages from website\r\n    if (source && source !== 'strivetech-website') {\r\n      console.warn('Ignored message from unknown source:', source);\r\n      return;\r\n    }\r\n\r\n    switch(type) {\r\n      case 'visibility':\r\n        this.handleVisibilityChange(data?.visible);\r\n        break;\r\n      case 'mode':\r\n        this.handleModeChange(data?.mode);\r\n        break;\r\n      case 'container_resize':\r\n        this.handleContainerResize(data?.width, data?.height);\r\n        break;\r\n      case 'ping':\r\n        this.sendToParent('pong', { timestamp: Date.now() });\r\n        break;\r\n      default:\r\n        console.log('Unknown message type:', type);\r\n    }\r\n  }\r\n\r\n  handleVisibilityChange(isVisible: boolean) {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const event = new CustomEvent('chatbot:visibility', {\r\n      detail: { visible: isVisible }\r\n    });\r\n    window.dispatchEvent(event);\r\n  }\r\n\r\n  handleModeChange(mode: string) {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const event = new CustomEvent('chatbot:mode', {\r\n      detail: { mode }\r\n    });\r\n    window.dispatchEvent(event);\r\n  }\r\n\r\n  handleContainerResize(width: number, height: number) {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const event = new CustomEvent('chatbot:resize', {\r\n      detail: { width, height }\r\n    });\r\n    window.dispatchEvent(event);\r\n  }\r\n\r\n  sendReadyMessage() {\r\n    this.debugLog('📤 Sending immediate ready message', true);\r\n    this.sendToParent('ready', {\r\n      version: '1.0.0',\r\n      mode: this.detectMode(),\r\n      capabilities: ['chat', 'streaming', 'analytics'],\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  initializeWhenReady() {\r\n    this.debugLog('🔧 initializeWhenReady called', true);\r\n    this.debugLog(`🖼️ iframe check: ${typeof window !== 'undefined' && window.parent !== window}`, true);\r\n    this.debugLog(`📍 current URL: ${typeof window !== 'undefined' ? window.location.href : 'N/A'}`, true);\r\n    this.debugLog(`📊 ready status: ${this.isReady}`, true);\r\n\r\n    if (!this.isReady) {\r\n      this.debugLog('🚀 Sending initial ready message...', true);\r\n      this.notifyReady();\r\n    } else {\r\n      this.debugLog('⚠️ Already ready, sending ready message again for reliability...', true);\r\n      this.sendToParent('ready', {\r\n        version: '1.0.0',\r\n        mode: this.detectMode(),\r\n        capabilities: ['chat', 'streaming', 'analytics'],\r\n        timestamp: Date.now()\r\n      });\r\n    }\r\n  }\r\n\r\n  notifyReady() {\r\n    this.isReady = true;\r\n    this.debugLog('📤 Sending ready message to parent...', true);\r\n    this.sendToParent('ready', {\r\n      version: '1.0.0',\r\n      mode: this.detectMode(),\r\n      capabilities: ['chat', 'streaming', 'analytics'],\r\n      timestamp: Date.now()\r\n    });\r\n\r\n    this.flushMessageQueue();\r\n  }\r\n\r\n  notifyResize() {\r\n    if (typeof window === 'undefined' || typeof document === 'undefined') return;\r\n\r\n    const height = Math.max(\r\n      document.body.scrollHeight,\r\n      document.body.offsetHeight,\r\n      document.documentElement.clientHeight,\r\n      document.documentElement.scrollHeight,\r\n      document.documentElement.offsetHeight\r\n    );\r\n\r\n    const width = Math.max(\r\n      document.body.scrollWidth,\r\n      document.body.offsetWidth,\r\n      document.documentElement.clientWidth,\r\n      document.documentElement.scrollWidth,\r\n      document.documentElement.offsetWidth\r\n    );\r\n\r\n    this.sendToParent('resize', { height, width });\r\n  }\r\n\r\n  notifyError(error: Error, code: string = 'UNKNOWN_ERROR', recoverable: boolean = true) {\r\n    this.sendToParent('error', {\r\n      error: error.message || 'Unknown error',\r\n      code,\r\n      recoverable,\r\n      stack: error.stack,\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  notifyMinimize() {\r\n    this.sendToParent('minimize', {});\r\n  }\r\n\r\n  notifyClose() {\r\n    this.sendToParent('close', {});\r\n  }\r\n\r\n  notifyNavigate(url: string, target: string = '_self') {\r\n    this.sendToParent('navigate', {\r\n      url,\r\n      target\r\n    });\r\n  }\r\n\r\n  notifyAnalytics(event: string, properties: Record<string, any> = {}) {\r\n    this.sendToParent('analytics', {\r\n      event,\r\n      properties,\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  detectMode(): string {\r\n    if (typeof window === 'undefined') return 'full';\r\n\r\n    const path = window.location.pathname;\r\n    if (path.includes('/widget')) return 'widget';\r\n    if (path.includes('/full')) return 'full';\r\n    return 'full';\r\n  }\r\n\r\n  sendToParent(type: string, data: any = {}) {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const message = {\r\n      type,\r\n      data,\r\n      timestamp: Date.now(),\r\n      source: 'sai-chatbot'\r\n    };\r\n\r\n    // Queue messages if not ready yet\r\n    if (!this.isReady && type !== 'ready') {\r\n      this.messageQueue.push(message);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Send to all known origins for maximum compatibility\r\n      window.parent.postMessage(message, '*');\r\n      window.parent.postMessage(message, 'https://strive-website-8xot95578-strive-tech.vercel.app');\r\n\r\n      this.debugLog(`✅ PostMessage sent: ${JSON.stringify(message)}`, true);\r\n    } catch (error) {\r\n      this.debugLog(`❌ PostMessage failed: ${error}`, true);\r\n    }\r\n  }\r\n\r\n  flushMessageQueue() {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    while (this.messageQueue.length > 0) {\r\n      const message = this.messageQueue.shift();\r\n      window.parent.postMessage(message, '*');\r\n      window.parent.postMessage(message, 'https://strive-website-8xot95578-strive-tech.vercel.app');\r\n    }\r\n  }\r\n}\r\n\r\n// Create and export singleton instance\r\nconst parentComm = new ParentCommunication();\r\n\r\n// Expose for debugging in development\r\nif (typeof window !== 'undefined' && process.env.NODE_ENV === 'development') {\r\n  (window as any).parentComm = parentComm;\r\n}\r\n\r\nexport default parentComm;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2662, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/components/%28web%29/features/chatbot/chat-container.tsx"],"sourcesContent":["// components/(web)/features/chatbot/chat-container.tsx\r\n'use client';\r\n\r\nimport React, { useEffect, useState, memo, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  MessageSquare, RotateCcw, Minimize2, Maximize2, ExternalLink,\r\n  TrendingUp, Eye, MessageCircle, Calendar, Sparkles, Zap,\r\n  ArrowRight, Download, Mail, FileText, Command, ChevronDown\r\n} from 'lucide-react';\r\nimport ChatMessage from './chat-message';\r\nimport ChatInput from './chat-input';\r\nimport { useChat } from '@/hooks/use-chat';\r\nimport { URLS, SERVICE_CARDS } from '@/app/constants/chatConstants';\r\nimport { useTimeBasedGreeting, useKeyboardShortcuts } from '@/hooks/use-advanced-chat';\r\nimport useScrollManager from '@/hooks/use-scroll-manager';\r\nimport parentComm from '@/lib/utils/parent-communication';\r\n\r\n// Quick action suggestions component\r\nconst QuickActions = memo(({ messageCount, onAction }: { messageCount: number; onAction: (action: string) => void }) => {\r\n  const suggestions = messageCount === 0 ? [\r\n    { icon: Zap, text: \"Quick Demo\", action: \"show_demo\" },\r\n    { icon: TrendingUp, text: \"ROI Calculator\", action: \"roi_calc\" },\r\n    { icon: FileText, text: \"Case Studies\", action: \"case_studies\" }\r\n  ] : [];\r\n\r\n  if (!suggestions.length) return null;\r\n\r\n  return (\r\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"flex gap-2 mb-4\">\r\n      {suggestions.map((s, i) => (\r\n        <motion.button\r\n          key={s.action}\r\n          initial={{ opacity: 0, scale: 0.8 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          transition={{ delay: i * 0.1 }}\r\n          onClick={() => onAction(s.action)}\r\n          className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-700 text-gray-300 hover:bg-gray-600 transition-all duration-300\"\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n        >\r\n          <s.icon size={14} />\r\n          <span>{s.text}</span>\r\n        </motion.button>\r\n      ))}\r\n    </motion.div>\r\n  );\r\n});\r\n\r\nQuickActions.displayName = 'QuickActions';\r\n\r\n// Service showcase card component - REAL ESTATE\r\nconst ServiceCard = memo(({ service, sendMessage }: { service: any; sendMessage: (msg: string) => void }) => {\r\n  const iconMap: Record<string, any> = { TrendingUp, Eye, MessageCircle };\r\n  const Icon = iconMap[service.icon];\r\n\r\n  if (!Icon) return null;\r\n\r\n  const handleCardClick = () => {\r\n    const serviceMessages: Record<string, string> = {\r\n      'TrendingUp': \"I'm interested in learning about Lead Generation. Can you explain how AI can help me attract and qualify more real estate leads? Then I'd like to explore solutions specific to my business.\",\r\n      'Eye': \"I'm interested in learning about Property Matching. Can you explain how AI can help match buyers with the perfect properties? Then I'd like to explore solutions specific to my business.\",\r\n      'MessageCircle': \"I'm interested in learning about Market Insights. Can you explain how AI can provide predictive analytics for pricing and market opportunities? Then I'd like to explore solutions specific to my business.\"\r\n    };\r\n\r\n    const messageToSend = serviceMessages[service.icon];\r\n    if (messageToSend && sendMessage) {\r\n      sendMessage(messageToSend);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"bg-gray-700 rounded-xl px-4 py-3 border border-gray-600 transition-all duration-300 cursor-pointer hover:bg-gray-600 flex items-center space-x-3\"\r\n      onClick={handleCardClick}\r\n      whileHover={{ scale: 1.02 }}\r\n      whileTap={{ scale: 0.95 }}\r\n    >\r\n      <motion.div\r\n        className={`w-10 h-10 bg-gradient-to-br ${service.gradientFrom} ${service.gradientTo} rounded-lg flex items-center justify-center flex-shrink-0`}\r\n        whileHover={{ rotate: 10 }}\r\n        transition={{ duration: 0.15 }}\r\n      >\r\n        <Icon size={20} className=\"text-white\" />\r\n      </motion.div>\r\n      <div>\r\n        <h3 className=\"font-semibold text-sm text-gray-200\">{service.title}</h3>\r\n        <div className=\"text-xs text-primary-500 font-medium\">Learn More →</div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n});\r\n\r\nServiceCard.displayName = 'ServiceCard';\r\n\r\ninterface ChatContainerProps {\r\n  mode?: 'full' | 'widget';\r\n}\r\n\r\nconst ChatContainer: React.FC<ChatContainerProps> = ({ mode = 'full' }) => {\r\n  const {\r\n    messages, isLoading, streamingMessage, error,\r\n    sendMessage, clearMessages, stopGeneration, retryLastMessage, getStats\r\n  } = useChat();\r\n\r\n  const {\r\n    scrollContainerRef,\r\n    messagesEndRef,\r\n    showScrollButton,\r\n    handleScrollToBottom\r\n  } = useScrollManager(messages, streamingMessage);\r\n\r\n  const [isMinimized, setIsMinimized] = useState(false);\r\n  const [showStats, setShowStats] = useState(false);\r\n  const [showKeyboardShortcuts, setShowKeyboardShortcuts] = useState(false);\r\n\r\n  useTimeBasedGreeting();\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      parentComm.notifyAnalytics('chat_opened', { mode });\r\n    }\r\n  }, [mode]);\r\n\r\n  useKeyboardShortcuts({\r\n    onSearch: () => console.log('Search triggered'),\r\n    onShowShortcuts: () => setShowKeyboardShortcuts(!showKeyboardShortcuts),\r\n    onClear: clearMessages\r\n  });\r\n\r\n  const handleScheduleClick = useCallback(() => {\r\n    if (typeof window !== 'undefined') {\r\n      if (window.parent && window.parent !== window) {\r\n        parentComm.notifyNavigate(URLS.CALENDLY, '_blank');\r\n      } else {\r\n        window.open(URLS.CALENDLY, '_blank');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleWebsiteClick = useCallback(() => {\r\n    if (typeof window !== 'undefined') {\r\n      if (window.parent && window.parent !== window) {\r\n        parentComm.notifyNavigate(URLS.STRIVE_WEBSITE, '_blank');\r\n      } else {\r\n        window.open(URLS.STRIVE_WEBSITE, '_blank');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleSendMessage = useCallback((message: string) => {\r\n    if (typeof window !== 'undefined') {\r\n      parentComm.notifyAnalytics('message_sent', {\r\n        messageLength: message.length,\r\n        mode\r\n      });\r\n    }\r\n    sendMessage(message);\r\n  }, [sendMessage, mode]);\r\n\r\n  const handleQuickAction = useCallback((action: string) => {\r\n    switch(action) {\r\n      case 'schedule':\r\n        handleScheduleClick();\r\n        break;\r\n      case 'export':\r\n        if (typeof window !== 'undefined') {\r\n          const blob = new Blob([JSON.stringify(messages, null, 2)], { type: 'application/json' });\r\n          const url = URL.createObjectURL(blob);\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = `strive-chat-${Date.now()}.json`;\r\n          a.click();\r\n        }\r\n        break;\r\n      case 'email':\r\n        if (typeof window !== 'undefined') {\r\n          window.open(`mailto:contact@strivetech.ai?subject=${encodeURIComponent('STRIVE Real Estate AI Consultation')}&body=${encodeURIComponent('I would like to discuss the real estate AI solutions we explored.')}`);\r\n        }\r\n        break;\r\n      default:\r\n        handleSendMessage(`Tell me more about ${action.replace('_', ' ')}`);\r\n    }\r\n  }, [handleScheduleClick, messages, handleSendMessage]);\r\n\r\n  const stats = getStats();\r\n\r\n  return (\r\n    <motion.div\r\n      className={`chat-container ${mode === 'widget' ? 'widget-chat' : 'full-chat'} flex flex-col bg-gray-800 border border-gray-600 rounded-xl overflow-hidden transition-all duration-300 relative ${isMinimized ? 'h-16' : mode === 'widget' ? 'h-full' : 'h-screen'}`}\r\n      initial={{ opacity: 0, y: 50 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.3 }}\r\n      style={{ boxShadow: '0 10px 40px rgba(0, 0, 0, 0.5)' }}\r\n    >\r\n      {/* Static gradient background */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary-900/10 via-transparent to-transparent opacity-50\" />\r\n      </div>\r\n\r\n      {/* Header - only in full mode */}\r\n      {mode === 'full' && (\r\n        <motion.div className=\"chat-header flex items-center justify-between p-4 bg-gray-900 text-gray-100 relative z-10 border-b border-gray-700\">\r\n          <div className=\"flex items-start justify-between w-full\">\r\n            <div className=\"flex flex-col\">\r\n              <motion.div\r\n                className=\"flex items-center mt-0 ml-5 cursor-pointer\"\r\n                whileHover={{ scale: 1.05 }}\r\n                onClick={handleWebsiteClick}\r\n              >\r\n                <motion.img\r\n                  src=\"/images/strive-wordmark.png\"\r\n                  alt=\"STRIVE\"\r\n                  className=\"h-10 w-auto\"\r\n                  style={{ filter: 'drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))' }}\r\n                />\r\n              </motion.div>\r\n\r\n              <motion.div className=\"flex items-center space-x-2 text-sm mt-5 ml-5 text-gray-400\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-green-500 glow-pulse\" />\r\n                  <span>Sai Active</span>\r\n                </div>\r\n                <span>•</span>\r\n                <span>{stats.totalMessages - 1} messages</span>\r\n                {!stats.hasApiKey && (\r\n                  <>\r\n                    <span>•</span>\r\n                    <span className=\"text-amber-400 flex items-center space-x-1\">\r\n                      <Zap size={12} />\r\n                      <span>API key needed</span>\r\n                    </span>\r\n                  </>\r\n                )}\r\n              </motion.div>\r\n            </div>\r\n\r\n            {/* Header buttons */}\r\n            <div className=\"flex items-center space-x-2 mt-0.5\">\r\n              <motion.button\r\n                onClick={handleScheduleClick}\r\n                className=\"brand-orange-button px-4 py-2.5 text-white rounded-xl font-semibold text-sm flex items-center space-x-2\"\r\n                whileHover={{ scale: 1.05, boxShadow: \"0 0 25px rgba(229, 95, 42, 0.6)\" }}\r\n                whileTap={{ scale: 0.95 }}\r\n                transition={{ duration: 0.15 }}\r\n              >\r\n                <Calendar size={24} />\r\n                <span className=\"hidden sm:inline\">Book Call</span>\r\n              </motion.button>\r\n\r\n              {[\r\n                { icon: TrendingUp, onClick: () => setShowStats(!showStats), rotate: 360 },\r\n                { icon: RotateCcw, onClick: clearMessages, rotate: -360, className: \"danger-button\" },\r\n                { icon: isMinimized ? Maximize2 : Minimize2, onClick: () => {\r\n                  const newMinimizedState = !isMinimized;\r\n                  setIsMinimized(newMinimizedState);\r\n                  if (newMinimizedState && typeof window !== 'undefined') {\r\n                    parentComm.notifyMinimize();\r\n                  }\r\n                }, scale: [1, 1.3, 0.8, 1.1, 1] }\r\n              ].map(({ icon: Icon, onClick, rotate, scale, className = \"secondary-button hidden-mobile\" }, i) => (\r\n                <motion.button\r\n                  key={i}\r\n                  onClick={onClick}\r\n                  className={`p-3 ${className} rounded-xl`}\r\n                  whileHover={{ scale: 1.05, backgroundColor: \"rgba(255, 255, 255, 0.1)\" }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  transition={{ duration: 0.15 }}\r\n                >\r\n                  <motion.div\r\n                    whileHover={rotate ? { rotate } : scale ? { scale } : {}}\r\n                    animate={{ rotate: 0 }}\r\n                    transition={{ duration: rotate === 360 || rotate === -360 ? 0.4 : 0.5, ease: rotate === -360 ? \"linear\" : \"easeInOut\" }}\r\n                  >\r\n                    <Icon size={24} />\r\n                  </motion.div>\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Stats Panel */}\r\n      <AnimatePresence>\r\n        {showStats && !isMinimized && (\r\n          <motion.div\r\n            initial={{ opacity: 0, height: 0 }}\r\n            animate={{ opacity: 1, height: \"auto\" }}\r\n            exit={{ opacity: 0, height: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n            className=\"bg-gray-850 border-b border-gray-700 p-4 relative z-10\"\r\n          >\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\r\n              {[\r\n                { value: stats.userMessages, label: \"Your Messages\", color: \"text-primary-500\" },\r\n                { value: stats.assistantMessages, label: \"Sai Responses\", color: \"text-blue-500\" },\r\n                { value: stats.hasApiKey ? 'Active' : 'Setup', label: \"Status\", color: \"text-green-500\" },\r\n                { value: stats.isStreaming ? 'Live' : 'Ready', label: \"Connection\", color: \"text-purple-500\" }\r\n              ].map(({ value, label, color }) => (\r\n                <div key={label} className=\"bg-gray-700 rounded-xl p-3 border border-gray-600\">\r\n                  <div className={`text-2xl font-semibold ${color}`}>{value}</div>\r\n                  <div className=\"text-xs text-gray-400\">{label}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Messages Area */}\r\n      <AnimatePresence>\r\n        {!isMinimized && (\r\n          <motion.div\r\n            initial={{ height: 0, opacity: 0 }}\r\n            animate={{ height: \"auto\", opacity: 1 }}\r\n            exit={{ height: 0, height: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n            className=\"flex-1 flex flex-col relative z-10 min-h-0\"\r\n          >\r\n            <div\r\n              ref={scrollContainerRef}\r\n              className={`flex-1 overflow-y-auto space-y-4 bg-gradient-to-b from-gray-800 to-gray-900 chat-scrollbar scroll-container ${mode === 'widget' ? 'p-3 pb-32' : 'p-6 pb-64'}`}\r\n            >\r\n              {/* Service cards - only show in full mode for first message */}\r\n              {messages.length === 1 && mode === 'full' && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ duration: 0.3 }}\r\n                  className=\"grid md:grid-cols-3 gap-4 mb-8 hidden md:grid\"\r\n                >\r\n                  {SERVICE_CARDS.map((service, index) => (\r\n                    <ServiceCard key={index} service={service} sendMessage={sendMessage} />\r\n                  ))}\r\n                </motion.div>\r\n              )}\r\n\r\n              <QuickActions messageCount={messages.length} onAction={handleQuickAction} />\r\n\r\n              {/* Messages */}\r\n              <AnimatePresence mode=\"popLayout\">\r\n                {messages.map((message, index) => (\r\n                  <ChatMessage key={message.id} message={message} isFirst={index === 0} mode={mode} />\r\n                ))}\r\n              </AnimatePresence>\r\n\r\n              {/* Streaming message */}\r\n              <AnimatePresence>\r\n                {isLoading && streamingMessage && (\r\n                  <ChatMessage\r\n                    message={{\r\n                      id: 'streaming',\r\n                      role: 'assistant',\r\n                      content: streamingMessage,\r\n                      timestamp: new Date()\r\n                    }}\r\n                    isStreaming={true}\r\n                    mode={mode}\r\n                  />\r\n                )}\r\n              </AnimatePresence>\r\n\r\n              {/* Error retry */}\r\n              <AnimatePresence>\r\n                {error && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, scale: 0.9 }}\r\n                    animate={{ opacity: 1, scale: 1 }}\r\n                    exit={{ opacity: 0, scale: 0.9 }}\r\n                    className=\"flex justify-center\"\r\n                  >\r\n                    <button\r\n                      onClick={retryLastMessage}\r\n                      className=\"brand-orange-button px-6 py-3 text-white text-sm font-semibold rounded-xl flex items-center space-x-2\"\r\n                    >\r\n                      <span>Retry with Sai</span>\r\n                      <RotateCcw size={16} />\r\n                    </button>\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n\r\n              <div ref={messagesEndRef} className=\"h-7\" />\r\n            </div>\r\n\r\n            {/* Scroll to Bottom Button */}\r\n            <AnimatePresence>\r\n              {showScrollButton && !isMinimized && (\r\n                <motion.button\r\n                  initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                  exit={{ opacity: 0, scale: 0.8, y: 20 }}\r\n                  transition={{ duration: 0.2, ease: \"easeOut\" }}\r\n                  onClick={handleScrollToBottom}\r\n                  className={`scroll-to-bottom-inside visible ${mode === 'widget' ? 'bottom-16' : messages.length > 1 ? 'bottom-52' : 'bottom-36'}`}\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.9 }}\r\n                  aria-label=\"Scroll to bottom\"\r\n                >\r\n                  <ChevronDown size={mode === 'widget' ? 16 : 20} />\r\n                </motion.button>\r\n              )}\r\n            </AnimatePresence>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Fixed Input Area at Bottom */}\r\n      <AnimatePresence>\r\n        {!isMinimized && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 50 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 50 }}\r\n            transition={{ duration: 0.3 }}\r\n            className=\"absolute bottom-0 left-0 right-0 z-20\"\r\n          >\r\n            <ChatInput\r\n              onSendMessage={handleSendMessage}\r\n              isLoading={isLoading}\r\n              disabled={!stats.hasApiKey}\r\n              onStop={stopGeneration}\r\n              onClear={clearMessages}\r\n              onScheduleClick={handleScheduleClick}\r\n              mode={mode}\r\n              messageCount={messages.length}\r\n            />\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Keyboard Shortcuts Helper */}\r\n      <AnimatePresence>\r\n        {showKeyboardShortcuts && (\r\n          <motion.div\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -20 }}\r\n            transition={{ duration: 0.15 }}\r\n            className=\"fixed bottom-20 left-4 bg-gray-900 border border-gray-700 rounded-lg p-3 shadow-xl z-50\"\r\n          >\r\n            <h4 className=\"text-xs font-bold text-gray-300 mb-2 flex items-center gap-2\">\r\n              <Command size={14} />\r\n              Keyboard Shortcuts\r\n            </h4>\r\n            {[\r\n              { key: \"⌘+K\", action: \"Quick search\" },\r\n              { key: \"⌘+/\", action: \"Toggle shortcuts\" },\r\n              { key: \"⌘+Enter\", action: \"Send message\" },\r\n              { key: \"Esc\", action: \"Clear input\" }\r\n            ].map((shortcut, i) => (\r\n              <motion.div\r\n                key={shortcut.key}\r\n                initial={{ opacity: 0, x: -10 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                transition={{ delay: i * 0.05, duration: 0.15 }}\r\n                className=\"flex justify-between items-center gap-4 text-xs text-gray-400 py-1\"\r\n              >\r\n                <kbd className=\"px-2 py-1 bg-gray-800 rounded text-gray-300 font-mono\">{shortcut.key}</kbd>\r\n                <span>{shortcut.action}</span>\r\n              </motion.div>\r\n            ))}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ChatContainer;\r\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;AAGvD;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;;;;;;;;;;;AAiBA,qCAAqC;AACrC,MAAM,6BAAe,IAAA,6MAAI,EAAC,CAAC,EAAE,YAAY,EAAE,QAAQ,EAAgE;IACjH,MAAM,cAAc,iBAAiB,IAAI;QACvC;YAAE,MAAM,uMAAG;YAAE,MAAM;YAAc,QAAQ;QAAY;QACrD;YAAE,MAAM,gOAAU;YAAE,MAAM;YAAkB,QAAQ;QAAW;QAC/D;YAAE,MAAM,0NAAQ;YAAE,MAAM;YAAgB,QAAQ;QAAe;KAChE,GAAG,EAAE;IAEN,IAAI,CAAC,YAAY,MAAM,EAAE,OAAO;IAEhC,qBACE,8OAAC,oMAAM,CAAC,GAAG;QAAC,SAAS;YAAE,SAAS;QAAE;QAAG,SAAS;YAAE,SAAS;QAAE;QAAG,WAAU;kBACrE,YAAY,GAAG,CAAC,CAAC,GAAG,kBACnB,8OAAC,oMAAM,CAAC,MAAM;gBAEZ,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,YAAY;oBAAE,OAAO,IAAI;gBAAI;gBAC7B,SAAS,IAAM,SAAS,EAAE,MAAM;gBAChC,WAAU;gBACV,YAAY;oBAAE,OAAO;gBAAK;gBAC1B,UAAU;oBAAE,OAAO;gBAAK;;kCAExB,8OAAC,EAAE,IAAI;wBAAC,MAAM;;;;;;kCACd,8OAAC;kCAAM,EAAE,IAAI;;;;;;;eAVR,EAAE,MAAM;;;;;;;;;;AAevB;AAEA,aAAa,WAAW,GAAG;AAE3B,gDAAgD;AAChD,MAAM,4BAAc,IAAA,6MAAI,EAAC,CAAC,EAAE,OAAO,EAAE,WAAW,EAAwD;IACtG,MAAM,UAA+B;QAAE,YAAA,gOAAU;QAAE,KAAA,uMAAG;QAAE,eAAA,yOAAa;IAAC;IACtE,MAAM,OAAO,OAAO,CAAC,QAAQ,IAAI,CAAC;IAElC,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,kBAAkB;QACtB,MAAM,kBAA0C;YAC9C,cAAc;YACd,OAAO;YACP,iBAAiB;QACnB;QAEA,MAAM,gBAAgB,eAAe,CAAC,QAAQ,IAAI,CAAC;QACnD,IAAI,iBAAiB,aAAa;YAChC,YAAY;QACd;IACF;IAEA,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,WAAU;QACV,SAAS;QACT,YAAY;YAAE,OAAO;QAAK;QAC1B,UAAU;YAAE,OAAO;QAAK;;0BAExB,8OAAC,oMAAM,CAAC,GAAG;gBACT,WAAW,CAAC,4BAA4B,EAAE,QAAQ,YAAY,CAAC,CAAC,EAAE,QAAQ,UAAU,CAAC,0DAA0D,CAAC;gBAChJ,YAAY;oBAAE,QAAQ;gBAAG;gBACzB,YAAY;oBAAE,UAAU;gBAAK;0BAE7B,cAAA,8OAAC;oBAAK,MAAM;oBAAI,WAAU;;;;;;;;;;;0BAE5B,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAuC,QAAQ,KAAK;;;;;;kCAClE,8OAAC;wBAAI,WAAU;kCAAuC;;;;;;;;;;;;;;;;;;AAI9D;AAEA,YAAY,WAAW,GAAG;AAM1B,MAAM,gBAA8C,CAAC,EAAE,OAAO,MAAM,EAAE;IACpE,MAAM,EACJ,QAAQ,EAAE,SAAS,EAAE,gBAAgB,EAAE,KAAK,EAC5C,WAAW,EAAE,aAAa,EAAE,cAAc,EAAE,gBAAgB,EAAE,QAAQ,EACvE,GAAG,IAAA,8IAAO;IAEX,MAAM,EACJ,kBAAkB,EAClB,cAAc,EACd,gBAAgB,EAChB,oBAAoB,EACrB,GAAG,IAAA,2JAAgB,EAAC,UAAU;IAE/B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAC;IAEnE,IAAA,uKAAoB;IAEpB,IAAA,kNAAS,EAAC;QACR;;IAGF,GAAG;QAAC;KAAK;IAET,IAAA,uKAAoB,EAAC;QACnB,UAAU,IAAM,QAAQ,GAAG,CAAC;QAC5B,iBAAiB,IAAM,yBAAyB,CAAC;QACjD,SAAS;IACX;IAEA,MAAM,sBAAsB,IAAA,oNAAW,EAAC;QACtC;;IAOF,GAAG,EAAE;IAEL,MAAM,qBAAqB,IAAA,oNAAW,EAAC;QACrC;;IAOF,GAAG,EAAE;IAEL,MAAM,oBAAoB,IAAA,oNAAW,EAAC,CAAC;QACrC;;QAMA,YAAY;IACd,GAAG;QAAC;QAAa;KAAK;IAEtB,MAAM,oBAAoB,IAAA,oNAAW,EAAC,CAAC;QACrC,OAAO;YACL,KAAK;gBACH;gBACA;YACF,KAAK;gBACH;;gBAQA;YACF,KAAK;gBACH;;gBAGA;YACF;gBACE,kBAAkB,CAAC,mBAAmB,EAAE,OAAO,OAAO,CAAC,KAAK,MAAM;QACtE;IACF,GAAG;QAAC;QAAqB;QAAU;KAAkB;IAErD,MAAM,QAAQ;IAEd,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,WAAW,CAAC,eAAe,EAAE,SAAS,WAAW,gBAAgB,YAAY,kHAAkH,EAAE,cAAc,SAAS,SAAS,WAAW,WAAW,YAAY;QACnQ,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,UAAU;QAAI;QAC5B,OAAO;YAAE,WAAW;QAAiC;;0BAGrD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;;YAIhB,SAAS,wBACR,8OAAC,oMAAM,CAAC,GAAG;gBAAC,WAAU;0BACpB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,oMAAM,CAAC,GAAG;oCACT,WAAU;oCACV,YAAY;wCAAE,OAAO;oCAAK;oCAC1B,SAAS;8CAET,cAAA,8OAAC,oMAAM,CAAC,GAAG;wCACT,KAAI;wCACJ,KAAI;wCACJ,WAAU;wCACV,OAAO;4CAAE,QAAQ;wCAA4C;;;;;;;;;;;8CAIjE,8OAAC,oMAAM,CAAC,GAAG;oCAAC,WAAU;;sDACpB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;;;;;8DACf,8OAAC;8DAAK;;;;;;;;;;;;sDAER,8OAAC;sDAAK;;;;;;sDACN,8OAAC;;gDAAM,MAAM,aAAa,GAAG;gDAAE;;;;;;;wCAC9B,CAAC,MAAM,SAAS,kBACf;;8DACE,8OAAC;8DAAK;;;;;;8DACN,8OAAC;oDAAK,WAAU;;sEACd,8OAAC,uMAAG;4DAAC,MAAM;;;;;;sEACX,8OAAC;sEAAK;;;;;;;;;;;;;;;;;;;;;;;;;;sCAQhB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,oMAAM,CAAC,MAAM;oCACZ,SAAS;oCACT,WAAU;oCACV,YAAY;wCAAE,OAAO;wCAAM,WAAW;oCAAkC;oCACxE,UAAU;wCAAE,OAAO;oCAAK;oCACxB,YAAY;wCAAE,UAAU;oCAAK;;sDAE7B,8OAAC,sNAAQ;4CAAC,MAAM;;;;;;sDAChB,8OAAC;4CAAK,WAAU;sDAAmB;;;;;;;;;;;;gCAGpC;oCACC;wCAAE,MAAM,gOAAU;wCAAE,SAAS,IAAM,aAAa,CAAC;wCAAY,QAAQ;oCAAI;oCACzE;wCAAE,MAAM,6NAAS;wCAAE,SAAS;wCAAe,QAAQ,CAAC;wCAAK,WAAW;oCAAgB;oCACpF;wCAAE,MAAM,cAAc,6NAAS,GAAG,6NAAS;wCAAE,SAAS;4CACpD,MAAM,oBAAoB,CAAC;4CAC3B,eAAe;4CACf;;wCAGF;wCAAG,OAAO;4CAAC;4CAAG;4CAAK;4CAAK;4CAAK;yCAAE;oCAAC;iCACjC,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,YAAY,gCAAgC,EAAE,EAAE,kBAC3F,8OAAC,oMAAM,CAAC,MAAM;wCAEZ,SAAS;wCACT,WAAW,CAAC,IAAI,EAAE,UAAU,WAAW,CAAC;wCACxC,YAAY;4CAAE,OAAO;4CAAM,iBAAiB;wCAA2B;wCACvE,UAAU;4CAAE,OAAO;wCAAK;wCACxB,YAAY;4CAAE,UAAU;wCAAK;kDAE7B,cAAA,8OAAC,oMAAM,CAAC,GAAG;4CACT,YAAY,SAAS;gDAAE;4CAAO,IAAI,QAAQ;gDAAE;4CAAM,IAAI,CAAC;4CACvD,SAAS;gDAAE,QAAQ;4CAAE;4CACrB,YAAY;gDAAE,UAAU,WAAW,OAAO,WAAW,CAAC,MAAM,MAAM;gDAAK,MAAM,WAAW,CAAC,MAAM,WAAW;4CAAY;sDAEtH,cAAA,8OAAC;gDAAK,MAAM;;;;;;;;;;;uCAZT;;;;;;;;;;;;;;;;;;;;;;0BAsBjB,8OAAC,4MAAe;0BACb,aAAa,CAAC,6BACb,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,QAAQ;oBAAE;oBACjC,SAAS;wBAAE,SAAS;wBAAG,QAAQ;oBAAO;oBACtC,MAAM;wBAAE,SAAS;wBAAG,QAAQ;oBAAE;oBAC9B,YAAY;wBAAE,UAAU;oBAAI;oBAC5B,WAAU;8BAEV,cAAA,8OAAC;wBAAI,WAAU;kCACZ;4BACC;gCAAE,OAAO,MAAM,YAAY;gCAAE,OAAO;gCAAiB,OAAO;4BAAmB;4BAC/E;gCAAE,OAAO,MAAM,iBAAiB;gCAAE,OAAO;gCAAiB,OAAO;4BAAgB;4BACjF;gCAAE,OAAO,MAAM,SAAS,GAAG,WAAW;gCAAS,OAAO;gCAAU,OAAO;4BAAiB;4BACxF;gCAAE,OAAO,MAAM,WAAW,GAAG,SAAS;gCAAS,OAAO;gCAAc,OAAO;4BAAkB;yBAC9F,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,iBAC5B,8OAAC;gCAAgB,WAAU;;kDACzB,8OAAC;wCAAI,WAAW,CAAC,uBAAuB,EAAE,OAAO;kDAAG;;;;;;kDACpD,8OAAC;wCAAI,WAAU;kDAAyB;;;;;;;+BAFhC;;;;;;;;;;;;;;;;;;;;0BAWpB,8OAAC,4MAAe;0BACb,CAAC,6BACA,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,QAAQ;wBAAG,SAAS;oBAAE;oBACjC,SAAS;wBAAE,QAAQ;wBAAQ,SAAS;oBAAE;oBACtC,MAAM;wBAAE,QAAQ;wBAAG,QAAQ;oBAAE;oBAC7B,YAAY;wBAAE,UAAU;oBAAI;oBAC5B,WAAU;;sCAEV,8OAAC;4BACC,KAAK;4BACL,WAAW,CAAC,4GAA4G,EAAE,SAAS,WAAW,cAAc,aAAa;;gCAGxK,SAAS,MAAM,KAAK,KAAK,SAAS,wBACjC,8OAAC,oMAAM,CAAC,GAAG;oCACT,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAG;oCAC7B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,YAAY;wCAAE,UAAU;oCAAI;oCAC5B,WAAU;8CAET,iKAAa,CAAC,GAAG,CAAC,CAAC,SAAS,sBAC3B,8OAAC;4CAAwB,SAAS;4CAAS,aAAa;2CAAtC;;;;;;;;;;8CAKxB,8OAAC;oCAAa,cAAc,SAAS,MAAM;oCAAE,UAAU;;;;;;8CAGvD,8OAAC,4MAAe;oCAAC,MAAK;8CACnB,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,8OAAC,0LAAW;4CAAkB,SAAS;4CAAS,SAAS,UAAU;4CAAG,MAAM;2CAA1D,QAAQ,EAAE;;;;;;;;;;8CAKhC,8OAAC,4MAAe;8CACb,aAAa,kCACZ,8OAAC,0LAAW;wCACV,SAAS;4CACP,IAAI;4CACJ,MAAM;4CACN,SAAS;4CACT,WAAW,IAAI;wCACjB;wCACA,aAAa;wCACb,MAAM;;;;;;;;;;;8CAMZ,8OAAC,4MAAe;8CACb,uBACC,8OAAC,oMAAM,CAAC,GAAG;wCACT,SAAS;4CAAE,SAAS;4CAAG,OAAO;wCAAI;wCAClC,SAAS;4CAAE,SAAS;4CAAG,OAAO;wCAAE;wCAChC,MAAM;4CAAE,SAAS;4CAAG,OAAO;wCAAI;wCAC/B,WAAU;kDAEV,cAAA,8OAAC;4CACC,SAAS;4CACT,WAAU;;8DAEV,8OAAC;8DAAK;;;;;;8DACN,8OAAC,6NAAS;oDAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;8CAMzB,8OAAC;oCAAI,KAAK;oCAAgB,WAAU;;;;;;;;;;;;sCAItC,8OAAC,4MAAe;sCACb,oBAAoB,CAAC,6BACpB,8OAAC,oMAAM,CAAC,MAAM;gCACZ,SAAS;oCAAE,SAAS;oCAAG,OAAO;oCAAK,GAAG;gCAAG;gCACzC,SAAS;oCAAE,SAAS;oCAAG,OAAO;oCAAG,GAAG;gCAAE;gCACtC,MAAM;oCAAE,SAAS;oCAAG,OAAO;oCAAK,GAAG;gCAAG;gCACtC,YAAY;oCAAE,UAAU;oCAAK,MAAM;gCAAU;gCAC7C,SAAS;gCACT,WAAW,CAAC,gCAAgC,EAAE,SAAS,WAAW,cAAc,SAAS,MAAM,GAAG,IAAI,cAAc,aAAa;gCACjI,YAAY;oCAAE,OAAO;gCAAI;gCACzB,UAAU;oCAAE,OAAO;gCAAI;gCACvB,cAAW;0CAEX,cAAA,8OAAC,mOAAW;oCAAC,MAAM,SAAS,WAAW,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASxD,8OAAC,4MAAe;0BACb,CAAC,6BACA,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAG;oBAC7B,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,MAAM;wBAAE,SAAS;wBAAG,GAAG;oBAAG;oBAC1B,YAAY;wBAAE,UAAU;oBAAI;oBAC5B,WAAU;8BAEV,cAAA,8OAAC,wLAAS;wBACR,eAAe;wBACf,WAAW;wBACX,UAAU,CAAC,MAAM,SAAS;wBAC1B,QAAQ;wBACR,SAAS;wBACT,iBAAiB;wBACjB,MAAM;wBACN,cAAc,SAAS,MAAM;;;;;;;;;;;;;;;;0BAOrC,8OAAC,4MAAe;0BACb,uCACC,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;oBAC9B,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,MAAM;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;oBAC3B,YAAY;wBAAE,UAAU;oBAAK;oBAC7B,WAAU;;sCAEV,8OAAC;4BAAG,WAAU;;8CACZ,8OAAC,mNAAO;oCAAC,MAAM;;;;;;gCAAM;;;;;;;wBAGtB;4BACC;gCAAE,KAAK;gCAAO,QAAQ;4BAAe;4BACrC;gCAAE,KAAK;gCAAO,QAAQ;4BAAmB;4BACzC;gCAAE,KAAK;gCAAW,QAAQ;4BAAe;4BACzC;gCAAE,KAAK;gCAAO,QAAQ;4BAAc;yBACrC,CAAC,GAAG,CAAC,CAAC,UAAU,kBACf,8OAAC,oMAAM,CAAC,GAAG;gCAET,SAAS;oCAAE,SAAS;oCAAG,GAAG,CAAC;gCAAG;gCAC9B,SAAS;oCAAE,SAAS;oCAAG,GAAG;gCAAE;gCAC5B,YAAY;oCAAE,OAAO,IAAI;oCAAM,UAAU;gCAAK;gCAC9C,WAAU;;kDAEV,8OAAC;wCAAI,WAAU;kDAAyD,SAAS,GAAG;;;;;;kDACpF,8OAAC;kDAAM,SAAS,MAAM;;;;;;;+BAPjB,SAAS,GAAG;;;;;;;;;;;;;;;;;;;;;;AAejC;uCAEe","debugId":null}},
    {"offset": {"line": 3642, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garre/STRIVE/Strive-SaaS/%28chatbot%29/app/page.tsx"],"sourcesContent":["// app/page.tsx\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport ChatContainer from '@/components/(web)/features/chatbot/chat-container';\r\nimport parentComm from '@/lib/utils/parent-communication';\r\n\r\nexport default function Home() {\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    document.documentElement.classList.add('dark');\r\n    document.body.classList.add('fullpage-mode');\r\n\r\n    // Initialize parent communication\r\n    if (typeof window !== 'undefined') {\r\n      parentComm.initializeWhenReady();\r\n\r\n      // Backup messages\r\n      const timer1 = setTimeout(() => {\r\n        parentComm.initializeWhenReady();\r\n      }, 1000);\r\n\r\n      const timer3 = setTimeout(() => {\r\n        parentComm.initializeWhenReady();\r\n      }, 3000);\r\n\r\n      return () => {\r\n        clearTimeout(timer1);\r\n        clearTimeout(timer3);\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <div className=\"h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4\">\r\n            <img\r\n              src=\"/images/strive-triangle.svg\"\r\n              alt=\"Loading\"\r\n              className=\"w-full h-full animate-spin\"\r\n              style={{\r\n                filter: 'drop-shadow(0 8px 20px rgba(245, 104, 52, 0.5))'\r\n              }}\r\n            />\r\n          </div>\r\n          <p className=\"text-gray-200 font-medium text-lg\">Loading AI Solutions Platform...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-700 overflow-hidden\">\r\n      <div className=\"relative z-10 min-h-screen flex flex-col py-6 px-4\">\r\n        <div className=\"w-full max-w-4xl mx-auto flex-1 flex flex-col\">\r\n          <motion.div\r\n            className=\"flex-1 min-h-0\"\r\n            initial={{ opacity: 0, scale: 0.9, y: 60 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            transition={{\r\n              duration: 1,\r\n              ease: \"easeOut\",\r\n              type: \"spring\",\r\n              stiffness: 100,\r\n              delay: 0.2\r\n            }}\r\n          >\r\n            <ChatContainer mode=\"full\" />\r\n          </motion.div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Dev indicator */}\r\n      {process.env.NODE_ENV === 'development' && (\r\n        <div className=\"fixed bottom-4 left-4 text-xs text-gray-400 bg-gray-800 bg-opacity-80 px-3 py-2 rounded-lg backdrop-blur-sm shadow-lg border border-gray-600\">\r\n          Dev Mode • Next.js\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,eAAe;;;;;;AAGf;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;QACX,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;QACvC,SAAS,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;QAE5B,kCAAkC;QAClC;;IAiBF,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS;QACZ,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,KAAI;4BACJ,KAAI;4BACJ,WAAU;4BACV,OAAO;gCACL,QAAQ;4BACV;;;;;;;;;;;kCAGJ,8OAAC;wBAAE,WAAU;kCAAoC;;;;;;;;;;;;;;;;;IAIzD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,oMAAM,CAAC,GAAG;wBACT,WAAU;wBACV,SAAS;4BAAE,SAAS;4BAAG,OAAO;4BAAK,GAAG;wBAAG;wBACzC,SAAS;4BAAE,SAAS;4BAAG,OAAO;4BAAG,GAAG;wBAAE;wBACtC,YAAY;4BACV,UAAU;4BACV,MAAM;4BACN,MAAM;4BACN,WAAW;4BACX,OAAO;wBACT;kCAEA,cAAA,8OAAC,4LAAa;4BAAC,MAAK;;;;;;;;;;;;;;;;;;;;;YAMzB,oDAAyB,+BACxB,8OAAC;gBAAI,WAAU;0BAA+I;;;;;;;;;;;;AAMtK","debugId":null}}]
}